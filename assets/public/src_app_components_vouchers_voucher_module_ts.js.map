{"version":3,"file":"src_app_components_vouchers_voucher_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAA6F;AAC9C;;AAEP;AACxC;AACA;AACA;AACA;AACA;AACA,gCAAgC,uDAAY;AAC5C,8BAA8B,uDAAY;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,qDAAkB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gEAAgE;AAChE;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,+BAA+B,+DAAwB,CAAC,qDAAiB;AAChI,kCAAkC,+DAAwB,GAAG,8DAA8D,oBAAoB,aAAa,wDAAwD,yEAAyE;AAC7R,QAAQ,uDAAgB;AACxB,OAAO,oBAAoB;AAC3B;AACA,MAAM,MAAM,qDAAU;AACtB;AACA;AACA,gBAAgB,MAAM,gDAAK,EAAE;AAC7B,qBAAqB,MAAM,iDAAM,EAAE;AACnC,mBAAmB,MAAM,iDAAM,EAAE;AACjC;AACA,eAAe,mDAAmD,+DAAwB;AAC1F,cAAc,oDAAS;AACvB;AACA;AACA;AACA,aAAa;AACb,KAAK,iBAAiB,UAAU,MAAM,qDAAiB,EAAE,IAAI,IAAI;AACjE,kBAAkB,gDAAK;AACvB,SAAS;AACT,kBAAkB,iDAAM;AACxB,SAAS;AACT,kBAAkB,iDAAM;AACxB,SAAS,GAAG,IAAI;;AAEhB;AACA;AACA,mEAAm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AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,4FAA4F,aAAa;AACzG;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,8BAA8B;;AAE9B;AACA;AACA;;AAEA;AACA;AACA,+DAA+D;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa;AACb;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,aAAa;AACb,aAAa;;AAEb;AACA;;AAEA;AACA;;AAEA;AACA,aAAa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,kBAAkB,eAAe;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAkB,wBAAwB;AAC1C;;AAEA;AACA,sBAAsB,kBAAkB;AACxC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,UAAU;AACV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,GAAG;;AAEH,mCAAmC;AACnC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB,kBAAkB;AACtC;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;;AAEA,iEAAe,YAAY,EAAC","sources":["./node_modules/angular2-signaturepad/__ivy_ngcc__/fesm2015/angular2-signaturepad.js","./src/app/components/vouchers/create.component.ts","./src/app/components/vouchers/detail.component.ts","./src/app/components/vouchers/list.component.ts","./src/app/components/vouchers/views/approving-signature.component.ts","./src/app/components/vouchers/views/products-form-detail.component.ts","./src/app/components/vouchers/views/step-info-form.component.ts","./src/app/components/vouchers/views/step-products-form.component.ts","./src/app/components/vouchers/views/view.module.ts","./src/app/components/vouchers/voucher.module.ts","./src/app/components/vouchers/create.component.html","./src/app/components/vouchers/detail.component.html","./src/app/components/vouchers/list.component.html","./src/app/components/vouchers/views/approving-signature.component.html","./src/app/components/vouchers/views/products-form-detail.component.html","./src/app/components/vouchers/views/step-info-form.component.html","./src/app/components/vouchers/views/step-products-form.component.html","./node_modules/signature_pad/dist/signature_pad.mjs"],"sourcesContent":["import { EventEmitter, Component, ElementRef, Input, Output, NgModule } from '@angular/core';\nimport SignaturePadNative from 'signature_pad';\n\nimport * as ɵngcc0 from '@angular/core';\nclass SignaturePad {\n    constructor(elementRef) {\n        // no op\n        this.elementRef = elementRef;\n        this.options = this.options || {};\n        this.onBeginEvent = new EventEmitter();\n        this.onEndEvent = new EventEmitter();\n    }\n    ngAfterContentInit() {\n        const canvas = this.elementRef.nativeElement.querySelector('canvas');\n        if (this.options.canvasHeight) {\n            canvas.height = this.options.canvasHeight;\n        }\n        if (this.options.canvasWidth) {\n            canvas.width = this.options.canvasWidth;\n        }\n        this.signaturePad = new SignaturePadNative(canvas, this.options);\n        this.signaturePad.onBegin = this.onBegin.bind(this);\n        this.signaturePad.onEnd = this.onEnd.bind(this);\n    }\n    ngOnDestroy() {\n        const canvas = this.elementRef.nativeElement.querySelector('canvas');\n        canvas.width = 0;\n        canvas.height = 0;\n    }\n    resizeCanvas() {\n        // When zoomed out to less than 100%, for some very strange reason,\n        // some browsers report devicePixelRatio as less than 1\n        // and only part of the canvas is cleared then.\n        const ratio = Math.max(window.devicePixelRatio || 1, 1);\n        const canvas = this.signaturePad.canvas;\n        canvas.width = canvas.offsetWidth * ratio;\n        canvas.height = canvas.offsetHeight * ratio;\n        canvas.getContext('2d').scale(ratio, ratio);\n        this.signaturePad.clear(); // otherwise isEmpty() might return incorrect value\n    }\n    // Returns signature image as an array of point groups\n    toData() {\n        if (this.signaturePad) {\n            return this.signaturePad.toData();\n        }\n        else {\n            return [];\n        }\n    }\n    // Draws signature image from an array of point groups\n    fromData(points) {\n        this.signaturePad.fromData(points);\n    }\n    // Returns signature image as data URL (see https://mdn.io/todataurl for the list of possible paramters)\n    toDataURL(imageType, quality) {\n        return this.signaturePad.toDataURL(imageType, quality); // save image as data URL\n    }\n    // Draws signature image from data URL\n    fromDataURL(dataURL, options = {}) {\n        // set default height and width on read data from URL\n        if (!options.hasOwnProperty('height') &&\n            this.options.canvasHeight) {\n            options.height = this.options.canvasHeight;\n        }\n        if (!options.hasOwnProperty('width') && this.options.canvasWidth) {\n            options.width = this.options.canvasWidth;\n        }\n        this.signaturePad.fromDataURL(dataURL, options);\n    }\n    // Clears the canvas\n    clear() {\n        this.signaturePad.clear();\n    }\n    // Returns true if canvas is empty, otherwise returns false\n    isEmpty() {\n        return this.signaturePad.isEmpty();\n    }\n    // Unbinds all event handlers\n    off() {\n        this.signaturePad.off();\n    }\n    // Rebinds all event handlers\n    on() {\n        this.signaturePad.on();\n    }\n    // set an option on the signaturePad - e.g. set('minWidth', 50);\n    set(option, value) {\n        switch (option) {\n            case 'canvasHeight':\n                this.signaturePad.canvas.height = value;\n                break;\n            case 'canvasWidth':\n                this.signaturePad.canvas.width = value;\n                break;\n            default:\n                this.signaturePad[option] = value;\n        }\n    }\n    // notify subscribers on signature begin\n    onBegin() {\n        this.onBeginEvent.emit(true);\n    }\n    // notify subscribers on signature end\n    onEnd() {\n        this.onEndEvent.emit(true);\n    }\n    queryPad() {\n        return this.signaturePad;\n    }\n}\nSignaturePad.ɵfac = function SignaturePad_Factory(t) { return new (t || SignaturePad)(ɵngcc0.ɵɵdirectiveInject(ɵngcc0.ElementRef)); };\nSignaturePad.ɵcmp = /*@__PURE__*/ ɵngcc0.ɵɵdefineComponent({ type: SignaturePad, selectors: [[\"signature-pad\"]], inputs: { options: \"options\" }, outputs: { onBeginEvent: \"onBeginEvent\", onEndEvent: \"onEndEvent\" }, decls: 1, vars: 0, template: function SignaturePad_Template(rf, ctx) { if (rf & 1) {\n        ɵngcc0.ɵɵelement(0, \"canvas\");\n    } }, encapsulation: 2 });\nSignaturePad.ctorParameters = () => [\n    { type: ElementRef }\n];\nSignaturePad.propDecorators = {\n    options: [{ type: Input }],\n    onBeginEvent: [{ type: Output }],\n    onEndEvent: [{ type: Output }]\n};\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SignaturePad, [{\n        type: Component,\n        args: [{\n                template: '<canvas></canvas>',\n                selector: 'signature-pad'\n            }]\n    }], function () { return [{ type: ɵngcc0.ElementRef }]; }, { options: [{\n            type: Input\n        }], onBeginEvent: [{\n            type: Output\n        }], onEndEvent: [{\n            type: Output\n        }] }); })();\n\nclass SignaturePadModule {\n}\nSignaturePadModule.ɵfac = function SignaturePadModule_Factory(t) { return new (t || SignaturePadModule)(); };\nSignaturePadModule.ɵmod = /*@__PURE__*/ ɵngcc0.ɵɵdefineNgModule({ type: SignaturePadModule });\nSignaturePadModule.ɵinj = /*@__PURE__*/ ɵngcc0.ɵɵdefineInjector({ imports: [[]] });\n(function () { (typeof ngDevMode === \"undefined\" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(SignaturePadModule, [{\n        type: NgModule,\n        args: [{\n                declarations: [SignaturePad],\n                imports: [],\n                exports: [SignaturePad]\n            }]\n    }], null, null); })();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && ɵngcc0.ɵɵsetNgModuleScope(SignaturePadModule, { declarations: [SignaturePad], exports: [SignaturePad] }); })();\n\n/*\n * Public API Surface of angular2-signaturepad\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { SignaturePad, SignaturePadModule };\n\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { ModalController } from \"@ionic/angular\";\r\nimport { CommandType, enuEdit } from \"src/app/helpers\";\r\nimport { VoucherInfo } from \"src/app/models/voucher\";\r\nimport { UtilityService } from \"src/app/shared/utility.service\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\n\r\nimport {\r\n  DataToolService,\r\n  IdentityService,\r\n  SQLExecService,\r\n  VoucherService,\r\n} from \"../../shared/services\";\r\nimport * as moment from \"moment\";\r\nimport { ApiParameter } from \"src/app/shared/api-params\";\r\nimport * as _ from \"lodash\";\r\nimport { WarehousesService } from \"../warehouse/core\";\r\n\r\n@Component({\r\n  selector: \"app-imports-create\",\r\n  templateUrl: \"./create.component.html\",\r\n  styleUrls: [\"./create.component.scss\"],\r\n})\r\nexport class CreateComponent implements OnInit {\r\n  strTitle: string = \"Tạo mới\";\r\n  today: any = new Date();\r\n  apiParams: ApiParameter = new ApiParameter();\r\n  employee: any = {};\r\n  linner: boolean = true;\r\n  submitting: boolean = false;\r\n  enuEdit: enuEdit = enuEdit.New;\r\n  stt: string;\r\n  strMaCt: string;\r\n  strMa_Ct_Convert: string;\r\n\r\n  model = new VoucherInfo();\r\n\r\n  constructor(\r\n    private identityService: IdentityService,\r\n    private voucherService: VoucherService,\r\n    private modalController: ModalController,\r\n    private utilityService: UtilityService,\r\n    private warehousesService: WarehousesService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n    this.strMaCt = this.route.snapshot.params.maCt;\r\n    this.stt = this.route.snapshot.queryParamMap.get(\"stt\");\r\n    this.enuEdit = Number(this.route.snapshot.queryParamMap.get(\"enuEdit\"));\r\n\r\n    if (this.enuEdit != enuEdit.Convert)\r\n      this.strMa_Ct_Convert = this.strMaCt;\r\n    else\r\n      this.strMa_Ct_Convert = this.route.snapshot.queryParamMap.get(\"maCt_Convert\");\r\n    if (this.enuEdit == enuEdit.Edit) this.strTitle = \"Sửa phiếu\";\r\n\r\n    if (this.enuEdit != enuEdit.New) this.getVoucher();\r\n  }\r\n\r\n  async getVoucher() {\r\n\r\n    const res = await this.voucherService.getVoucher(\r\n      this.stt,\r\n      this.enuEdit == enuEdit.Edit ? this.strMaCt : this.strMa_Ct_Convert\r\n    );\r\n\r\n    if (this.enuEdit == enuEdit.Convert) {\r\n      Object.assign(res.table[0],\r\n        {\r\n          ma_LoaiNX: \"\",\r\n          so_Ct: \"\"\r\n        });\r\n    }\r\n\r\n    this.model = Object.assign({}, this.model, {\r\n      header: Object.assign(this.model.header, res?.table[0]),\r\n      detail: res?.table1 ?? [],\r\n    });\r\n  }\r\n\r\n  async onSubmit() {\r\n    this.submitting = true;\r\n    const voucher: VoucherInfo = Object.assign(this.model, {\r\n      header: Object.assign(this.model.header, {\r\n        ngay_Ct: moment(this.model.header.ngay_Ct).format(\"YYYY-MM-DD\"),\r\n        MA_CT: this.strMa_Ct_Convert,\r\n        STT: this.enuEdit != enuEdit.Edit ? \"\" : this.model.header.STT,\r\n      }),\r\n    });\r\n\r\n    const res = await this.warehousesService\r\n      .saveVoucher_Inventory(voucher, this.enuEdit)\r\n      .finally(() => (this.submitting = false));\r\n    if (res) {\r\n      this.utilityService.showToast(\"Lưu thành công\");\r\n      this.router.navigateByUrl(\r\n        \"components/voucher/detail/\" + res + \"/\" + this.strMa_Ct_Convert\r\n      );\r\n    }\r\n  }\r\n\r\n  resetInfo() {\r\n    this.model.header = Object.create(null);\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.enuEdit = null;\r\n    this.strMa_Ct_Convert = '';\r\n    this.stt = '';\r\n  }\r\n\r\n  FormCheckValid() {\r\n    if (\r\n      this.model.detail &&\r\n      (this.strMa_Ct_Convert == \"TP\" || this.strMa_Ct_Convert == \"XP\")\r\n    ) {\r\n      return _.some(_.map(this.model.detail, \"ma_Sp\"), [\"length\", 0]);\r\n    }\r\n    return false;\r\n  }\r\n}\r\n","import { Component, OnInit } from \"@angular/core\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport { AppConfig, enuEdit } from \"src/app/helpers\";\r\nimport { VoucherInfo } from \"src/app/models/voucher\";\r\nimport { VoucherService } from \"src/app/shared/services\";\r\nimport { aspPermission } from './../../shared/services/asp-permissions.service';\r\n\r\n@Component({\r\n  selector: \"app-detail\",\r\n  templateUrl: \"./detail.component.html\",\r\n  styleUrls: [\"./detail.component.scss\"],\r\n})\r\nexport class DetailComponent implements OnInit {\r\n  perm: aspPermission = Object.create(null);\r\n  routeLink: string = \"\";\r\n  strMaCt: string;\r\n  stt: string;\r\n\r\n  info = new VoucherInfo();\r\n  // info: VoucherInfo = {\r\n  //   header: {},\r\n  //   detail: []\r\n  // };\r\n  loading: boolean = false;\r\n\r\n  constructor(\r\n    private voucherService: VoucherService,\r\n    private route: ActivatedRoute,\r\n    private router: Router\r\n  ) {\r\n    this.strMaCt = this.route.snapshot.params.maCt;\r\n    this.stt = this.route.snapshot.params.stt;\r\n\r\n    route.data.subscribe((data) => {\r\n      return this.perm = data[AppConfig.PERM_RESOLVER_KEY];\r\n    })\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewWillEnter() {\r\n    this.getVoucher();\r\n  }\r\n\r\n  async getVoucher() {\r\n    this.loading = true;\r\n    const res = await this.voucherService.getVoucher(this.stt, this.strMaCt)\r\n      .finally(() => (this.loading = false));\r\n      \r\n    this.info = new VoucherInfo(res?.table[0], res?.table1);\r\n  }\r\n\r\n  public edit(isConvert: string) {\r\n    this.routeLink = \"components/voucher/create/\" + this.strMaCt;\r\n    this.router.navigate([this.routeLink],{queryParams:{stt: this.stt, maCt_Convert: this.strMaCt, enuEdit:enuEdit.Edit} });\r\n  }\r\n}\r\n","import { Component, Inject, OnInit, Optional } from \"@angular/core\";\r\n\r\nimport { CommandType } from \"../../helpers\";\r\nimport { enuEdit , AppConfig} from \"../../helpers\";\r\nimport { UtilityService } from \"../../shared/utility.service\";\r\n\r\nimport {aspPermissionsService, VoucherService} from \"../../shared/services\";\r\nimport { ApiParameter } from \"src/app/shared/api-params\";\r\nimport { AlertController, ModalController } from \"@ionic/angular\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport * as moment from \"moment\";\r\nimport { HttpEventType } from \"@angular/common/http\";\r\nimport { FileViewedModalComponent } from \"src/app/layout\";\r\nimport { IdentityService, aspPermission } from \"src/app/shared/services\";\r\nimport {\r\n  Capacitor\r\n} from '@capacitor/core';\r\nimport { ApprovingSignatureComponent } from \"./views/approving-signature.component\";\r\n\r\n@Component({\r\n  selector: \"app-voucher-list\",\r\n  templateUrl: \"./list.component.html\",\r\n  styleUrls: [\"./list.component.scss\"],\r\n})\r\nexport class ListComponent implements OnInit {\r\n  perm: aspPermission = Object.create(null);\r\n  perm_duyet: aspPermission = Object.create(null);\r\n  filterModel: FilterModel = {\r\n    ngay_Ct1: moment().startOf(\"month\").format(\"YYYY-MM-DD\"),\r\n    ngay_Ct2: moment().format(\"YYYY-MM-DD\"),\r\n    top: 10,\r\n  };\r\n  strMaCt: string;\r\n  strMa_Ct_Convert: string;\r\n  currentMaDvCs: any;\r\n  totalCount: number = 0;\r\n  selectTrang_Thai: string = \"\";\r\n  skeletons: any = [];\r\n  loading: boolean = true;\r\n  data: any[];\r\n  searchTerm: string = \"\";\r\n  routeLink: string = \"\";\r\n\r\n  today: any = new Date();\r\n\r\n  title: any = {\r\n    PN: \"Phiếu nhập kho\",\r\n    PX: \"Phiếu xuất kho\",\r\n    DC: \"Phiếu điều chuyển\",\r\n    XP: \"Xuất kho thành phẩm\",\r\n    TP: \"Nhập Kho thành phẩm\",\r\n    NK: \"Phiếu nhập khẩu\"\r\n  };\r\n\r\n  isNativePlatform: boolean = true;\r\n  platformStr: string = 'web';\r\n\r\n  constructor(\r\n    private voucherService: VoucherService,\r\n    private alertController: AlertController,\r\n    private modalController: ModalController,\r\n    private identityService: IdentityService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private utilityService: UtilityService,\r\n    private permissionsService: aspPermissionsService\r\n  ) {\r\n    \r\n    this.strMaCt = this.route.snapshot.params.maCt;\r\n    this.strMa_Ct_Convert = this.route.snapshot.params.maCt_Convert;\r\n\r\n    route.data.subscribe((data) => {\r\n      this.perm = data[AppConfig.PERM_RESOLVER_KEY];\r\n    });\r\n\r\n    this.permissionsService.GetPermission('duyet').then(res => this.perm_duyet = res);\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  ionViewWillEnter() {\r\n    setTimeout(() => {\r\n      this.getList();\r\n    }, 1);\r\n    this.platformStr = Capacitor.getPlatform();\r\n    this.isNativePlatform = Capacitor.isNativePlatform();\r\n  }\r\n\r\n  async getList(isLoading: boolean = true) {\r\n    this.loading = isLoading;\r\n    const filterParams = {\r\n      STATUS: this.selectTrang_Thai,\r\n      KEYWORD: this.searchTerm,\r\n      Ma_Ct: this.strMaCt,\r\n      Ngay_Ct1: this.filterModel.ngay_Ct1 || moment().startOf('month'),\r\n      Ngay_Ct2: this.filterModel.ngay_Ct2 || moment(),\r\n      TOP: this.filterModel.top,\r\n      MA_DVCS: this.identityService.getStrCurrentMaDvCs(),\r\n    };\r\n    const res = await this.voucherService.GetListVoucher(filterParams).finally(() => (this.loading = false));\r\n    this.data = res || [];\r\n    this.totalCount = res[0]?.[\"totalCount\"] || 0;\r\n  }\r\n\r\n  dateChange() {\r\n    this.getList();\r\n  }\r\n\r\n\r\n  loadMoreData(event, refresh: boolean = false) {\r\n    // this.filterModel.top = !refresh ? this.filterModel.top + 5 : this.filterModel.top;\r\n    this.filterModel.top = this.filterModel.top + 5;\r\n\r\n    setTimeout(async () => {\r\n      this.getList(refresh).finally(() => {\r\n        event.target.complete();\r\n        if (!refresh)\r\n          event.target.disabled = this.filterModel.top >= this.totalCount;\r\n      });\r\n    }, 100);\r\n  }\r\n\r\n  async confirm(item: any, Is_duyet: boolean) {\r\n    const alert = await this.alertController.create({\r\n      header: \"Thông báo!\",\r\n      message: Is_duyet ? \"Duyệt\" : \"Bõ duyệt\",\r\n      buttons: [\r\n        {\r\n          text: \"Huỷ bỏ\",\r\n          role: \"cancel\",\r\n          handler: (blah) => {\r\n            console.log(\"Confirm Cancel\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Xác nhận\",\r\n          handler: async () => {\r\n            const filterParams = {\r\n              STT: item.stt,\r\n              MA_CT: this.strMaCt,\r\n              DUYET: Is_duyet,\r\n            };\r\n            const check = await this.voucherService.DuyetVoucher(filterParams);\r\n            if (check) this.utilityService.showAlert(\"Thay đổi thành công\");\r\n\r\n            setTimeout(() => {\r\n              this.getList();\r\n            }, 1);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async delete(item: any) {\r\n    const alert = await this.alertController.create({\r\n      header: \"Thông báo!\",\r\n      message: \"Xoá chứng từ\",\r\n      buttons: [\r\n        {\r\n          text: \"Huỷ bỏ\",\r\n          role: \"cancel\",\r\n          handler: (blah) => {\r\n            console.log(\"Confirm Cancel\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Xác nhận\",\r\n          handler: async () => {\r\n            const check = await this.voucherService.SQLDeleteCt(\r\n              item.stt,\r\n              this.strMaCt\r\n            );\r\n            if (check) this.utilityService.showAlert(\"Xoá thành công\");\r\n\r\n            setTimeout(() => {\r\n              this.getList();\r\n            }, 1);\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    await alert.present();\r\n  }\r\n\r\n  async view_edit(item: any) {\r\n    if (item)\r\n      this.router.navigateByUrl(\r\n        \"components/voucher/detail/\" + item.stt + \"/\" + this.strMaCt\r\n      );\r\n  }\r\n\r\n  async edit(item: any, _enuEdit: enuEdit) {\r\n    \r\n    if (item) {\r\n      \r\n      if (_enuEdit == enuEdit.Convert) {\r\n        if (this.strMaCt == \"PN\" || this.strMaCt == \"PX\")\r\n          this.strMa_Ct_Convert = this.strMaCt == \"PN\" ? \"PX\" : \"PN\";\r\n        else if (this.strMaCt == \"TP\" || this.strMaCt == \"XP\")\r\n          this.strMa_Ct_Convert = this.strMaCt == \"TP\" ? \"XP\" : \"TP\";\r\n          item.stt_Org = item.stt;\r\n      }\r\n      \r\n      this.routeLink = \"components/voucher/create/\" +this.strMaCt;\r\n      if(_enuEdit == enuEdit.New)\r\n        this.router.navigate([this.routeLink],{queryParams:{enuEdit:_enuEdit} });\r\n      else\r\n        this.router.navigate([this.routeLink],{queryParams:{stt: item.stt, maCt_Convert: this.strMa_Ct_Convert, enuEdit:_enuEdit} });\r\n    }\r\n  }\r\n\r\n  async exportPDF(_item: any) {\r\n    if (!_item) return;\r\n\r\n    this.loading = true;\r\n\r\n    const item: any = {};\r\n    item.stt = _item.stt;\r\n    item.ma_Ct = this.strMaCt;\r\n    item.report_File = \"rptCT_\";\r\n    item.report_File = item.report_File + this.strMaCt;\r\n    this.voucherService.DowloadPDF_Blod(item).subscribe((event) => {\r\n      debugger\r\n      if (event) {\r\n        switch (event.type) {\r\n          case HttpEventType.DownloadProgress:\r\n            break;\r\n          case HttpEventType.Response:\r\n            const blob = new Blob([event.body as BlobPart], {\r\n              type: event.body?.type,\r\n            });\r\n            const url = URL.createObjectURL(blob);\r\n            this.openFileModal(url,blob);\r\n            break;\r\n        }\r\n      }\r\n      this.loading = false;\r\n    });\r\n  }\r\n\r\n  async signPDF(item : any, loai_chu_ky : string)\r\n  {\r\n    const modal = await this.modalController.create({\r\n      component: ApprovingSignatureComponent,\r\n      componentProps: {\r\n          stt : item.stt,\r\n          loai_chu_ky : loai_chu_ky\r\n      },\r\n    });\r\n    modal.onDidDismiss().then((dataReturned) => {});\r\n    \r\n    return await modal.present();\r\n  }\r\n\r\n  private async openFileModal(url: any, data: Blob) {\r\n\r\n    const modal = await this.modalController.create({\r\n      component: FileViewedModalComponent,\r\n      componentProps: {\r\n        url: url,\r\n        data : data\r\n      },\r\n    });\r\n    modal.onDidDismiss().then((dataReturned) => {});\r\n    \r\n    return await modal.present();\r\n  }\r\n\r\n\r\n  trackBy(index: number, item: any) {\r\n    return item?.stt ?? index;\r\n  }\r\n}\r\n\r\ninterface FilterModel {\r\n  ngay_Ct1: any;\r\n  ngay_Ct2: any;\r\n  top?: number;\r\n  keyword?: string;\r\n}\r\n","import { ModalController, NavController, ToastController } from '@ionic/angular';\nimport { AfterViewInit, asNativeElements, Component, ElementRef, Input, ViewChild } from '@angular/core';\nimport { SignaturePad } from 'angular2-signaturepad';\nimport { ApiParameter } from 'src/app/shared/api-params';\nimport { CommandType } from 'src/app/helpers';\nimport { SQLExecService, VoucherService } from 'src/app/shared/services';\nimport { async } from '@angular/core/testing';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Component({\n  selector: 'app-approving-signature',\n  templateUrl: './approving-signature.component.html',\n  styleUrls: ['./approving-signature.component.scss'],\n})\nexport class ApprovingSignatureComponent implements AfterViewInit {\n\n  @ViewChild(SignaturePad) signaturePad!: SignaturePad;\n  @Input() stt!: any;\n  @Input() loai_chu_ky!: any;\n  apiParams: ApiParameter = new ApiParameter();\n  signatureImg! : any;\n  image! : ImageData ;\n  signaturePadOptions: Object = { \n    'minWidth': 1,\n    'canvasWidth': 500,\n    'canvasHeight': 500\n  };\n  \n  constructor(\n    private modalController: ModalController,\n    private voucherService: VoucherService,\n    private sqlService : SQLExecService,\n    private domSanitizer: DomSanitizer ) { \n    \n  }\n\n  async ngAfterViewInit() {\n    debugger\n    // this.signaturePad is now available\n    this.signaturePad.set('minWidth', 2); // set szimek/signature_pad options at runtime\n    this.signaturePad.clear(); // invoke functions from szimek/signature_pad API\n    this.apiParams = new ApiParameter();\n    if(this.loai_chu_ky == \"1\")\n      this.apiParams.strSQLExec = `SELECT  Data  FROM L81CHUKYONLINE WHERE Stt = '${this.stt}' `;\n    if(this.loai_chu_ky == \"2\")\n      this.apiParams.strSQLExec = `SELECT Data  FROM L81CHUKYONLINE_NV WHERE Stt = '${this.stt}' `;\n    \n      //this.apiParams.strSQLExec = `SELECT Hinh FROM L81DMCBNV WHERE Ma_CbnV = 'ASP0001' `;\n    \n    this.apiParams.cmdType = CommandType.Text;\n    const res2 = await this.sqlService.ExecuteReturnDt(this.apiParams);\n    if (res2)     \n      // var uints = new Uint8Array(res2[0].data);\n      // var base64 = btoa(String.fromCharCode(...uints));\n      this.signatureImg = res2[0].data;\n \n  }\n\n  drawComplete() {\n    // will be notified of szimek/signature_pad's onEnd event\n    console.log(this.signaturePad.toDataURL());\n  }\n\n  drawStart() {\n    // will be notified of szimek/signature_pad's onBegin event\n    console.log('begin drawing');\n  }\n\n  clearPad() {\n    this.signaturePad.clear();\n  }\n\n  async savePad() {\n    debugger\n    //this.signatureImg = this.signaturePad.toDataURL();\n    //this.apiParams.strSQLExec = \"Sp_API_Update_Chu_Ky\";\n    const paraList = {\n        LOAI_CHU_KY : this.loai_chu_ky,\n        STT : this.stt,\n        DATA : this.signaturePad.toDataURL(),\n      };\n      //this.apiParams.cmdType = CommandType.StoredProcedure;\n      await this.voucherService.UpdateChuKy(paraList);\n\n      this.apiParams = new ApiParameter();\n      if(this.loai_chu_ky == \"1\")\n        this.apiParams.strSQLExec = `SELECT  Data  FROM L81CHUKYONLINE WHERE Stt = '${this.stt}' `;\n        if(this.loai_chu_ky == \"2\")\n        this.apiParams.strSQLExec = `SELECT Data  FROM L81CHUKYONLINE_NV WHERE Stt = '${this.stt}' `;\n      \n        //this.apiParams.strSQLExec = `SELECT Hinh FROM L81DMCBNV WHERE Ma_CbnV = 'ASP0001' `;\n      \n      this.apiParams.cmdType = CommandType.Text;\n      const res2 = await this.sqlService.ExecuteReturnDt(this.apiParams);\n      if (res2)     \n        // var uints = new Uint8Array(res2[0].data);\n        // var base64 = btoa(String.fromCharCode(...uints));\n        this.signatureImg = res2[0].data;\n  }\n  async closeModal(ok: boolean = false) { \n    await this.modalController.dismiss();\n  }\n   hexToBase64(str) {\n    return btoa(String.fromCharCode.apply(null, str.replace(/\\r|\\n/g, \"\").replace(/([\\da-fA-F]{2}) ?/g, \"0x$1 \").replace(/ +$/, \"\").split(\" \")));\n}\n}\n  \n\n","import {\r\n  AfterContentChecked,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  ViewChild,\r\n  OnChanges,\r\n  OnInit,\r\n  Optional,\r\n  Output,\r\n  SimpleChanges,\r\n} from \"@angular/core\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { ModalController, NavParams, AlertController } from \"@ionic/angular\";\r\nimport * as moment from \"moment\";\r\nimport { CommandType, enuEdit } from \"src/app/helpers\";\r\nimport { ApiParameter } from \"src/app/shared/api-params\";\r\nimport { IdentityService, SQLExecService, VoucherService } from \"src/app/shared/services\";\r\nimport { ProductFilterModalComponent } from \"../../base\";\r\nimport { WarehousesService } from \"../../warehouse/core\";\r\n\r\n@Component({\r\n  selector: \"app-products-form-detail\",\r\n  templateUrl: \"./products-form-detail.component.html\",\r\n  styleUrls: [\"./products-form-detail.component.scss\"],\r\n})\r\nexport class ProductsFormDetailComponent implements OnInit {\r\n  @Input() model: any = {};\r\n  @Output() modelChange: EventEmitter<any> = new EventEmitter<any>();\r\n\r\n  apiParams: ApiParameter = new ApiParameter();\r\n  submitting: boolean = false;\r\n  strMa_DvCs!: string;\r\n  enuEdit: enuEdit = enuEdit.New;\r\n  strMaCt: string = \"\";\r\n  strMa_Ct_Convert: string;\r\n  strSoCt: string = \"\";\r\n\r\n  listSO: any[] = [];\r\n  listLSX: any[] = [];\r\n  listKHSX: any[] = [];\r\n  \r\n  strMa_Ct_PX: string[] = [\"PX\",\"XP\"];\r\n\r\n  constructor(\r\n    private voucherService: VoucherService,\r\n    private identityService: IdentityService,\r\n    private navParams: NavParams,\r\n    private route: ActivatedRoute,\r\n    private modalController: ModalController,\r\n    private warehousesService: WarehousesService\r\n  ) {\r\n    this.model = navParams.get(\"itemProduct\");\r\n\r\n    this.strMaCt = navParams.get(\"strMaCt\");\r\n    this.enuEdit = navParams.get(\"enuEdit\");\r\n    this.strMa_Ct_Convert = navParams.get(\"strMa_Ct_Convert\");\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.strMa_DvCs = this.identityService.getStrCurrentMaDvCs();\r\n\r\n    setTimeout(() => {\r\n      if(this.strMa_Ct_PX.includes(this.strMa_Ct_Convert))\r\n        this.get_listMa_Lo();\r\n      this.GetListForvoucher();\r\n    }, 10);\r\n\r\n    if (this.model.ma_Lo) {\r\n      this.listMa_Lo[0] = {\r\n        ma_Lo: this.model.ma_Lo,\r\n      };\r\n    }\r\n  }\r\n\r\n  ngAfterContentChecked(): void {\r\n    this.modelChange.emit(this.model);\r\n  }\r\n\r\n  async closeModal(ok: boolean = false) {\r\n    Object.assign(this.model,{\r\n      han_Sd : moment(this.model.han_Sd).format(\"YYYY-MM-DD\"),\r\n      ma_Lo: this.model.ma_Lo\r\n    })\r\n    \r\n    await this.modalController.dismiss(this.model);\r\n  }\r\n\r\n  clearMa_Lo(ev: any) {\r\n    ev.stopPropagation();\r\n    delete this.model.ma_Lo;\r\n    this.modelChange.emit(this.model);\r\n  }\r\n  clearMa_Sp(ev: any) {\r\n    ev.stopPropagation();\r\n    delete this.model.ma_Sp;\r\n    this.modelChange.emit(this.model);\r\n  }\r\n\r\n  listMa_Lo: any[] = [];\r\n  async get_listMa_Lo() {\r\n    const filterParams = {\r\n      Ngay_Ct: new Date(),\r\n      Ma_Kho: this.model.ma_Kho,\r\n      Ma_Vt: this.model.ma_Vt,\r\n      Stt: this.model.stt,\r\n      Ma_DvCs: this.strMa_DvCs,\r\n    };\r\n    const res = await this.voucherService.GetListMa_Lo(filterParams);\r\n    this.listMa_Lo = res;\r\n  }\r\n\r\n  clearCusMa_SP(ev: any) {\r\n    ev.stopPropagation();\r\n    delete this.model?.ma_Sp;\r\n    this.modelChange.emit(this.model);\r\n  }\r\n\r\n  async openFilterProductsModal() {\r\n    const modal = await this.modalController.create({\r\n      component: ProductFilterModalComponent,\r\n      componentProps :{\r\n        loai_vt : '1'\r\n      }\r\n    });\r\n\r\n    modal.onDidDismiss().then(async (dataReturned) => {\r\n      if (dataReturned.data) {\r\n        this.model.ma_Sp =dataReturned.data.ma_Vt;\r\n        // this.productModelSet(dataReturned.data);\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  private async GetListForvoucher() {\r\n    const res = await this.warehousesService.GetListForvoucher({Ma_Ct:''});\r\n    this.listSO = res.table3;\r\n    this.listLSX = res.table4;\r\n    this.listKHSX = res.table5;\r\n  }\r\n}\r\n","import {\r\n  AfterContentChecked,\r\n  Component,\r\n  EventEmitter,\r\n  Input,\r\n  OnChanges,\r\n  OnInit,\r\n  Optional,\r\n  Output,\r\n  SimpleChanges,\r\n} from \"@angular/core\";\r\nimport { ControlContainer, NgForm } from \"@angular/forms\";\r\nimport { ModalController } from \"@ionic/angular\";\r\nimport { CommandType, enuEdit } from \"src/app/helpers\";\r\nimport { ApiParameter } from \"src/app/shared/api-params\";\r\nimport { IdentityService, SQLExecService, UserService } from \"src/app/shared/services\";\r\nimport { UtilityService } from \"src/app/shared/utility.service\";\r\nimport { CustomerFilterModalComponent } from \"../../base\";\r\nimport { ActivatedRoute, Router } from \"@angular/router\";\r\nimport * as moment from \"moment\";\r\nimport { VoucherInfo } from \"src/app/models/voucher\";\r\nimport { WarehousesService } from \"../../warehouse/core\";\r\n\r\n@Component({\r\n  selector: \"app-voucher-step-info-form\",\r\n  templateUrl: \"./step-info-form.component.html\",\r\n  styleUrls: [\"./step-info-form.component.scss\"],\r\n  viewProviders: [{ provide: ControlContainer, useExisting: NgForm }],\r\n})\r\nexport class StepInfoFormComponent implements OnInit, AfterContentChecked {\r\n  @Input() model!: VoucherInfo;\r\n  @Output() modelChange: EventEmitter<VoucherInfo> =\r\n    new EventEmitter<VoucherInfo>();\r\n\r\n  today: any = new Date();\r\n\r\n  employee: any = {};\r\n  customer: any = {};\r\n  inventories: any[] = [];\r\n  listEmployees: any[] = [];\r\n  listDepartment: any[] = [];\r\n  listLoaiNhapXuat: any[] = [];\r\n  listSO: any[] = [];\r\n  listLSX: any[] = [];\r\n  listKHSX: any[] = [];\r\n  strMaCt: string = \"\";\r\n  strMa_Ct_Convert: string;\r\n  strSoCt: string = \"\";\r\n  strMa_DvCs: string = \"\";\r\n  enuEdit: enuEdit = enuEdit.New;\r\n\r\n  constructor(\r\n    private userService: UserService,\r\n    private identityService: IdentityService,\r\n    private warehousesService: WarehousesService,\r\n    private utilityService: UtilityService,\r\n    private route: ActivatedRoute,\r\n    public modalController: ModalController\r\n  ) {\r\n    this.strMaCt = this.route.snapshot.params.maCt;\r\n    this.enuEdit = Number(this.route.snapshot.queryParamMap.get(\"enuEdit\"));\r\n\r\n    if (this.enuEdit != enuEdit.Convert)\r\n      this.strMa_Ct_Convert = this.strMaCt;\r\n    else\r\n      this.strMa_Ct_Convert = this.route.snapshot.queryParamMap.get(\"maCt_Convert\");\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getInfoUser();\r\n    this.get_list();\r\n  }\r\n\r\n  async openFilterCustomersModal() {\r\n    await this.utilityService.showLoader();\r\n    const modal = await this.modalController.create({\r\n      component: CustomerFilterModalComponent,\r\n    });\r\n\r\n\r\n    modal.onDidDismiss().then((dataReturned) => {\r\n      if (dataReturned.data) {\r\n        this.customer = dataReturned.data;\r\n        this.model = Object.assign(this.model, {\r\n          header: Object.assign(this.model.header, {\r\n            ma_Dt: dataReturned.data?.ma_Dt,\r\n            ten_Dt: dataReturned.data?.ten_Dt,\r\n          }),\r\n        });\r\n      }\r\n    });\r\n    return await modal\r\n      .present()\r\n      .finally(() => this.utilityService.hideLoader());\r\n  }\r\n\r\n  ngAfterContentChecked(): void {\r\n    this.modelChange.emit(this.model);\r\n  }\r\n\r\n  // ngOnChanges(changes: SimpleChanges) {\r\n  //   debugger\r\n  //   this.modelChange.emit(this.model);\r\n  // }\r\n\r\n  clearCus(ev: any) {\r\n    ev.stopPropagation();\r\n    delete this.model.header?.ma_Dt;\r\n    delete this.model.header?.ten_Dt;\r\n    this.modelChange.emit(this.model);\r\n  }\r\n\r\n  private async get_list() {\r\n    const param ={Ma_Ct: this.strMa_Ct_Convert}\r\n    const res = await this.warehousesService.GetListForvoucher(param);\r\n    this.listEmployees = res.table;\r\n    this.listDepartment = res.table1;\r\n    this.listLoaiNhapXuat = res.table2;\r\n    this.listSO = res.table3;\r\n    this.listLSX = res.table4;\r\n    this.listKHSX = res.table5;\r\n    this.inventories = res.table6;\r\n\r\n    this.strMa_DvCs = this.identityService.getStrCurrentMaDvCs();\r\n\r\n    if (this.enuEdit != enuEdit.Edit && this.model) {\r\n      this.model = Object.assign(this.model, {\r\n        header: Object.assign(this.model.header, {\r\n          ma_CbNv: this.employee.ma_CbNv,\r\n          ma_Bp: this.employee.ma_Bp,\r\n          ma_DvCs: this.strMa_DvCs,\r\n          so_Ct_SO: this.model.header?.so_Ct_SO ?? \"\",\r\n          so_Ct_LSX: this.model.header?.so_Ct_LSX ?? \"\",\r\n          so_Ct_KHSX: this.model.header?.so_Ct_KHSX ?? \"\",\r\n        }),\r\n      });\r\n    }\r\n  }\r\n  async getInfoUser() {\r\n    const res = await this.userService.GetInfoUser();\r\n    this.employee = res[0];\r\n  }\r\n}\r\n","import {\r\n  Component,\r\n  EventEmitter,\r\n  Inject,\r\n  Input,\r\n  OnInit,\r\n  Optional,\r\n  Output,\r\n} from \"@angular/core\";\r\nimport { ModalController, NavParams, AlertController } from \"@ionic/angular\";\r\n\r\nimport { UtilityService } from \"../../../shared/utility.service\";\r\n\r\nimport { ControlContainer, NgForm } from \"@angular/forms\";\r\nimport { ProductFilterModalComponent } from \"../../base\";\r\n\r\nimport * as _ from \"lodash\";\r\n\r\nimport { BarcodeScanner, BarcodeScannerOptions } from '@awesome-cordova-plugins/barcode-scanner/ngx';\r\n\r\nimport { ApiParameter } from \"src/app/shared/api-params\";\r\nimport { CommandType, enuEdit } from \"src/app/helpers\";\r\nimport { IdentityService, SQLExecService } from \"src/app/shared/services\";\r\nimport { ProductsFormDetailComponent } from \"./products-form-detail.component\";\r\nimport { ActivatedRoute } from \"@angular/router\";\r\nimport { VoucherInfo } from \"src/app/models/voucher\";\r\nimport { WarehousesService } from \"../../warehouse/core\";\r\nimport * as moment from 'moment';\r\n\r\n@Component({\r\n  selector: \"app-voucher-step-products-form\",\r\n  templateUrl: \"./step-products-form.component.html\",\r\n  styleUrls: [\"./step-products-form.component.scss\"],\r\n  viewProviders: [{ provide: ControlContainer, useExisting: NgForm }],\r\n})\r\nexport class StepProductsFormComponent implements OnInit {\r\n  @Input() model!: VoucherInfo;\r\n  @Output() modelChange: EventEmitter<VoucherInfo> = new EventEmitter<VoucherInfo>();\r\n\r\n  searchTerm: string = \"\";\r\n\r\n  barcodeScannerOptions: BarcodeScannerOptions;\r\n  strMa_DvCs!: string;\r\n  enuEdit: enuEdit = enuEdit.New;\r\n  strMaCt: string = \"\";\r\n  strMa_Ct_Convert: string;\r\n\r\n  \r\n\r\n  constructor(\r\n    private warehousesService: WarehousesService,\r\n    private utilityService: UtilityService,\r\n    private barcodeScanner: BarcodeScanner,\r\n    private modalController: ModalController,\r\n    private alertController: AlertController,\r\n    private route: ActivatedRoute,\r\n    private identityService: IdentityService,\r\n  ) {\r\n    this.strMaCt = this.route.snapshot.params.maCt;\r\n    this.enuEdit = Number(this.route.snapshot.queryParamMap.get(\"enuEdit\"));\r\n\r\n    if (this.enuEdit != enuEdit.Convert) \r\n      this.strMa_Ct_Convert = this.strMaCt;\r\n    else\r\n      this.strMa_Ct_Convert = this.route.snapshot.queryParamMap.get(\"maCt_Convert\");\r\n    this.barcodeScannerOptions = {\r\n      prompt: \"\",\r\n      showTorchButton: true,\r\n      showFlipCameraButton: true,\r\n      //torchOn: true,\r\n      resultDisplayDuration: 1,\r\n    };\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.strMa_DvCs = this.identityService.getStrCurrentMaDvCs();\r\n  }\r\n\r\n  async openFilterProductsModal() {\r\n    const modal = await this.modalController.create({\r\n      component: ProductFilterModalComponent,\r\n    });\r\n\r\n    modal.onDidDismiss().then(async (dataReturned) => {\r\n      if (dataReturned.data) {\r\n        this.productModelSet(dataReturned.data);\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  productScanner() {\r\n    this.barcodeScanner\r\n      .scan(this.barcodeScannerOptions)\r\n      .then((data) => {\r\n        //this.productScannedData = data;\r\n        if (data.cancelled) {\r\n          console.log(\"User cancelled the action!\");\r\n          return false;\r\n        } else if (data.text && data.text != \"\")\r\n          this.getProductByQRCode(data.text);\r\n      })\r\n      .catch((err) => {\r\n        this.utilityService.showToast(JSON.stringify(err));\r\n      });\r\n  }\r\n\r\n  async getProductByQRCode(qrCode: string) {\r\n    let paraList;\r\n    if (qrCode.includes(\"{\")) {\r\n      let result = JSON.parse(qrCode);\r\n      paraList = {\r\n        MA_VT: result.Ma_Vt,\r\n        MA_LO: result.Ma_Lo,\r\n        HAN_SD: moment(result.Han_Sd,'DD/MM/YYYY').format('YYYY-MM-DD'),\r\n        NGAY_SX: moment(result.Ngay_Sx,'DD/MM/YYYY').format('YYYY-MM-DD'),\r\n        MA_KHO: result.Ma_Kho,\r\n        SO_LUONG: result.So_Luong,\r\n        Ma_DvCs: this.strMa_DvCs,\r\n      };\r\n    } else {\r\n      paraList = {\r\n        MA_VT: qrCode,\r\n        MA_LO: '',\r\n        HAN_SD: '',\r\n        NGAY_SX: '',\r\n        MA_KHO: '',\r\n        SO_LUONG: 0,\r\n        Ma_DvCs: this.strMa_DvCs,\r\n      };\r\n    }\r\n    const res = await this.warehousesService.GetVtByCode(paraList).finally();\r\n    if (res.length <= 0) {\r\n      await this.utilityService.showAlert(\r\n        `Không tìm thấy sản phẩm cho: ${qrCode}`\r\n      );\r\n    } else {\r\n      this.productModelSet(res[0]);\r\n      this.productScanner();\r\n    }\r\n  }\r\n\r\n  productModelSet(item: any) {\r\n    if (!item) return;\r\n    Object.assign(item, \r\n      {\r\n        ma_Lo: item.ma_Lo? item.ma_Lo :\"\",\r\n        so_Ct_SO: this.model.header.so_Ct_SO ? this.model.header.so_Ct_SO : \"\",\r\n        so_Ct_LSX : this.model.header.so_Ct_LSX ? this.model.header.so_Ct_LSX : \"\",\r\n        so_Ct_KHSX: this.model.header.so_Ct_KHSX ? this.model.header.so_Ct_KHSX : \"\",\r\n      });\r\n\r\n    const idx = _.findIndex(this.model.detail, (o) => {\r\n      return o.ma_Vt == item.ma_Vt && o.ma_Lo == item.ma_Lo;\r\n    });\r\n\r\n    if (idx > -1) {\r\n      this.model.detail[idx].so_Luong9 += 1;\r\n      this.modelChange.emit(this.model);\r\n    } else {\r\n      const obj = Object.assign({}, item, {\r\n        so_Luong9: 1,\r\n        ma_Lo: ([\"PN\",\"TP\"].includes(this.strMa_Ct_Convert)) && item.is_Lo? this.GetMa_Lo(): item.ma_Lo,\r\n        ma_Sp : item.ma_Sp,\r\n        stt0: this.model.detail ? this.model.detail.length + 1 : 1,\r\n      });\r\n      this.model.detail.push(obj);\r\n      this.modelChange.emit(this.model);\r\n    }\r\n  }\r\n\r\n  public GetMa_Lo() {\r\n    var today = new Date();\r\n    \r\n    return (\r\n      today.getFullYear().toString().substring(2, 4) +\r\n      today.getMonth().toString() +\r\n      today.getDate().toString() +\r\n      \".\" +\r\n      today.getHours().toString() +\r\n      today.getMinutes().toString() +\r\n      today.getSeconds().toString()\r\n    );\r\n  }\r\n\r\n  async edit(item: any) {\r\n    const obj = Object.assign({}, item, {\r\n      ngay_Ct: this.model.header.ngay_Ct,\r\n      ma_Kho: this.model.header.ma_Kho,\r\n    });\r\n\r\n    const modal = await this.modalController.create({\r\n      component: ProductsFormDetailComponent,\r\n      componentProps: {\r\n        itemProduct: obj,\r\n        strMaCt: this.strMaCt,\r\n        enuEdit: this.enuEdit,\r\n        strMa_Ct_Convert: this.strMa_Ct_Convert\r\n      },\r\n    });\r\n    modal.onDidDismiss().then((dataReturned) => {\r\n      if (dataReturned !== null) {\r\n        const data = dataReturned.data;\r\n        if (data) {\r\n          const idx = _.findIndex(this.model.detail, (o) => {\r\n            return o.stt0 == data.stt0;\r\n          });\r\n          this.model.detail[idx] = data;\r\n          this.modelChange.emit(this.model);\r\n        }\r\n      }\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  removeProduct(item: any) {\r\n    const idx = _.findIndex(this.model.detail, (o) => {\r\n      return o.stt0 == item.stt0;\r\n    });\r\n    if (idx > -1) {\r\n      this.model.detail.splice(idx, 1);\r\n      this.modelChange.emit(this.model);\r\n    }\r\n  }\r\n\r\n  public changeQty(item: any = {}, type: string = \"\") {\r\n    if (item.so_Luong9 < 1) {\r\n      item.so_Luong9 = 1;\r\n      return;\r\n    }\r\n    switch (type) {\r\n      case \"previous\":\r\n        item.so_Luong9 = item.so_Luong9 - 1;\r\n        break;\r\n      case \"next\":\r\n        item.so_Luong9 = item.so_Luong9 + 1;\r\n        break;\r\n    }\r\n  }\r\n\r\n  async updateQty(item: any) {\r\n    const alert = await this.alertController.create({\r\n      header: \"Cập nhật số lượng\",\r\n      subHeader: item.ten_Vt,\r\n      inputs: [\r\n        {\r\n          name: \"quantity\",\r\n          type: \"number\",\r\n          min: 1,\r\n          //max: product.product.sl_Ton,\r\n          value: item.so_Luong9,\r\n          placeholder: \"Nhập số lượng\",\r\n        },\r\n      ],\r\n      buttons: [\r\n        {\r\n          text: \"Hủy\",\r\n          role: \"cancel\",\r\n          cssClass: \"secondary\",\r\n          handler: () => {\r\n            console.log(\"Confirm Cancel\");\r\n          },\r\n        },\r\n        {\r\n          text: \"Đồng ý\",\r\n          handler: (dataAlert) => {\r\n            const qty =\r\n              !isNaN(dataAlert.quantity) && _.toNumber(dataAlert.quantity) > 0\r\n                ? _.toNumber(dataAlert.quantity)\r\n                : 1;\r\n            item.so_Luong9 = qty;\r\n          },\r\n        },\r\n      ],\r\n    });\r\n\r\n    await alert.present().then(() => {\r\n      const firstInput: any = document.querySelector(\"ion-alert input\");\r\n      firstInput?.focus();\r\n      return;\r\n    });\r\n  }\r\n\r\n  \r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { SharedModule } from '../../shared.module';\r\nimport { BaseModule } from '../../base/base.module';\r\n\r\nimport { StepProductsFormComponent } from './step-products-form.component';\r\nimport { StepInfoFormComponent } from './step-info-form.component';\r\nimport { ProductsFormDetailComponent } from './products-form-detail.component'\r\nimport { ProductComponent  } from '../../products/product.component';\r\nimport { SignaturePadModule } from 'angular2-signaturepad';\r\nimport { ApprovingSignatureComponent } from './approving-signature.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ProductsFormDetailComponent,\r\n    StepProductsFormComponent,\r\n    StepInfoFormComponent,\r\n    ApprovingSignatureComponent\r\n    //ProductComponent\r\n  ],\r\n  imports: [\r\n    SharedModule,\r\n    BaseModule,\r\n    SignaturePadModule\r\n  ],\r\n  exports: [\r\n    ProductsFormDetailComponent,\r\n    StepProductsFormComponent,\r\n    StepInfoFormComponent,\r\n    ApprovingSignatureComponent\r\n   // ProductComponent\r\n  ]\r\n})\r\nexport class ViewModule { }\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SharedModule } from '../shared.module';\r\nimport { ViewModule } from './views/view.module';\r\nimport { BaseModule } from '../base/base.module';\r\nimport { ListComponent } from './list.component';\r\nimport { CreateComponent } from './create.component';\r\nimport { DetailComponent } from './detail.component';\r\nimport { SignaturePadModule } from 'angular2-signaturepad';\r\n\r\n\r\nconst routing: ModuleWithProviders<VoucherModule> = RouterModule.forChild([\r\n  {\r\n    path: 'list/:maCt',\r\n    component: ListComponent,\r\n  },\r\n  {\r\n    path: 'create/:maCt',\r\n    component: CreateComponent,\r\n  },\r\n  {\r\n    path: 'detail/:stt/:maCt',\r\n    component: DetailComponent,\r\n  }\r\n]);\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ListComponent,\r\n    CreateComponent,\r\n    DetailComponent\r\n  ],\r\n  imports: [\r\n    BaseModule, \r\n    SharedModule,\r\n    ViewModule,\r\n    SignaturePadModule,\r\n    routing\r\n  ]\r\n})\r\nexport class VoucherModule { }\r\n","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"asp\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <!-- <ion-back-button defaultHref=\\\"/components/inventory/list\\\" text=\\\"\\\"></ion-back-button> -->\\r\\n      <ion-button [fill]=\\\"'clear'\\\" [routerLink]=\\\"['/components/voucher/list', strMaCt]\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" ios=\\\"chevron-back-outline\\\" md=\\\"arrow-back-outline\\\" size=\\\"default\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{ strTitle }}</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n<ion-content [fullscreen]=\\\"true\\\" color=\\\"light\\\" class=\\\"p-8\\\">\\r\\n  <ion-grid>\\r\\n    <mat-horizontal-stepper labelPosition=\\\"bottom\\\" [linear]=\\\"linner\\\" #stepper>\\r\\n      <mat-step [stepControl]=\\\"fdInfo.control\\\">\\r\\n        <ng-template matStepLabel>Thông tin chung</ng-template>\\r\\n        <form role=\\\"form\\\" #fdInfo=\\\"ngForm\\\">\\r\\n          <app-voucher-step-info-form [(model)]=\\\"model\\\"></app-voucher-step-info-form>\\r\\n          <div class=\\\"form-row button-row p-5\\\" align=\\\"center\\\">\\r\\n            <button mat-raised-button (click)=\\\"resetInfo()\\\" [disabled]=\\\"fdInfo.invalid\\\">\\r\\n              Nhập lại\\r\\n            </button>\\r\\n            <button mat-raised-button matStepperNext color=\\\"primary\\\" [disabled]=\\\"fdInfo.invalid\\\">\\r\\n              Tiếp theo\\r\\n            </button>\\r\\n          </div>\\r\\n        </form>\\r\\n      </mat-step>\\r\\n\\r\\n      <mat-step [completed]=\\\"model.detail && model.detail.length > 0\\\">\\r\\n        <ng-template matStepLabel>Sản phẩm</ng-template>\\r\\n        <form role=\\\"form\\\" #fdProduct=\\\"ngForm\\\">\\r\\n          <app-voucher-step-products-form [(model)]=\\\"model\\\"></app-voucher-step-products-form>\\r\\n          <div class=\\\"form-row p-5\\\" align=\\\"start\\\">\\r\\n            <button mat-raised-button matStepperPrevious color=\\\"default\\\">\\r\\n              Quay lại\\r\\n            </button>\\r\\n          </div>\\r\\n        </form>\\r\\n      </mat-step>\\r\\n    </mat-horizontal-stepper>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n<ion-footer *ngIf=\\\"stepper.selectedIndex == 1\\\" color=\\\"bgcolor\\\" class=\\\"bg-footer ion-no-border\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-button (click)=\\\"onSubmit()\\\" expand=\\\"block\\\" size=\\\"default\\\" color=\\\"asp\\\" [disabled]=\\\"\\r\\n          fdInfo.invalid ||\\r\\n          !model.detail ||\\r\\n          model.detail.length == 0 ||\\r\\n          submitting || FormCheckValid()\\r\\n        \\\">\\r\\n      <span>Lưu</span>\\r\\n      <ion-spinner slot=\\\"start\\\" size=\\\"default\\\" *ngIf=\\\"submitting\\\"></ion-spinner>\\r\\n      <ion-icon name=\\\"checkmark-done-sharp\\\" slot=\\\"start\\\" size=\\\"default\\\" *ngIf=\\\"!submitting\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"asp\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button [fill]=\\\"'clear'\\\" [routerLink]=\\\"['../../../list',strMaCt]\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" ios=\\\"chevron-back-outline\\\" md=\\\"arrow-back-outline\\\" size=\\\"default\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n\\r\\n      \\r\\n    </ion-buttons>\\r\\n    \\r\\n    <ion-title>Chi tiết</ion-title>\\r\\n    <!-- <ion-buttons slot=\\\"end\\\" fill=\\\"clear\\\">\\r\\n      <ion-button *ngIf=\\\"perm?.allow_Edit\\\" (click)=\\\"edit('edit')\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\"  size=\\\"large\\\" name=\\\"pencil-outline\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons> -->\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content fullscreen color=\\\"light\\\" class=\\\"ion-padding\\\">\\r\\n\\r\\n  <ng-container *ngIf=\\\"!loading;else skeletonTmpl\\\">\\r\\n    <ion-row class=\\\"info-top mt-20\\\">\\r\\n      <span class=\\\"icon-top\\\">\\r\\n\\r\\n        <ion-icon *ngIf=\\\"info.header?.is_App;else desktopIcon\\\" [color]=\\\"info.header?.duyet? 'success':'danger'\\\"\\r\\n          class=\\\"icon\\\" name=\\\"phone-portrait-outline\\\" size=\\\"large\\\">\\r\\n        </ion-icon>\\r\\n        <ng-template #desktopIcon>\\r\\n          <ion-icon name=\\\"desktop-outline\\\" [color]=\\\"info.header.duyet? 'success':'danger'\\\" size=\\\"large\\\" class=\\\"icon\\\">\\r\\n          </ion-icon>\\r\\n        </ng-template>\\r\\n      </span>\\r\\n      <ion-col size=\\\"12\\\" class=\\\"ion-text-center mt-20\\\">\\r\\n        <ion-text>\\r\\n          <p class=\\\"title info-top-text\\\">{{info.header.ma_Dt}} </p>\\r\\n        </ion-text>\\r\\n        <ion-text>\\r\\n          <p class=\\\"title info-top-text\\\">{{info.header.ten_Dt}} </p>\\r\\n        </ion-text>\\r\\n        <ion-text>\\r\\n          <p class=\\\"info-top-text\\\" [ngClass]=\\\"{'success': info.header.duyet, 'danger': !info.header.duyet}\\\">\\r\\n            {{info.header.duyet?'Đã duyệt':'Chưa duyệt'}}</p>\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-list lines=\\\"none\\\" class=\\\"info-detail ion-margin-bottom\\\">\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-text text-left class=\\\"title\\\">Số chứng từ</ion-text>\\r\\n        </ion-label>\\r\\n        <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin ion-text-end ion-text-wrap content\\\">\\r\\n          <ion-text>{{info.header.so_Ct}}</ion-text>\\r\\n        </ion-note>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-text text-left class=\\\"title\\\">Ngày Ct</ion-text>\\r\\n        </ion-label>\\r\\n        <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin ion-text-end ion-text-wrap content\\\">\\r\\n          <ion-text>{{info.header.ngay_Ct | formatDate}}</ion-text>\\r\\n        </ion-note>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-text text-left class=\\\"title\\\">{{info.header.loai_Ct== \\\"1\\\"?\\\"Kho nhập\\\":\\\"Kho xuất\\\"}}</ion-text>\\r\\n        </ion-label>\\r\\n        <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin ion-text-end ion-text-wrap content\\\">\\r\\n          <ion-text>{{info.header.ten_Kho}}&nbsp;({{info.header.ma_Kho}})</ion-text>\\r\\n        </ion-note>\\r\\n      </ion-item>\\r\\n\\r\\n      <ng-container *ngIf=\\\"strMaCt=='DC'\\\">\\r\\n        <ion-item>\\r\\n          <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n            <ion-text text-left class=\\\"title\\\">Kho nhập</ion-text>\\r\\n          </ion-label>\\r\\n          <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin ion-text-end ion-text-wrap content\\\">\\r\\n            <ion-text>{{info.header.ten_KhoN}}&nbsp;({{info.header.ma_KhoN}})</ion-text>\\r\\n          </ion-note>\\r\\n        </ion-item>\\r\\n      </ng-container>\\r\\n\\r\\n      <ng-container>\\r\\n        <ion-item>\\r\\n          <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n            <ion-text text-left class=\\\"title\\\">Diễn giải</ion-text>\\r\\n          </ion-label>\\r\\n          <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin ion-text-end ion-text-wrap content\\\">\\r\\n            <ion-text>{{info.header.dien_Giai}}</ion-text>\\r\\n          </ion-note>\\r\\n        </ion-item>\\r\\n      </ng-container>\\r\\n\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list class=\\\"info-detail ion-margin-bottom product\\\">\\r\\n\\r\\n      <ion-list-header>\\r\\n        <ion-label>\\r\\n          <p>Sản phẩm</p>\\r\\n        </ion-label>\\r\\n\\r\\n        <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin\\\" color=\\\"danger\\\" mode=\\\"ios\\\">\\r\\n          <ion-text class=\\\"ml-10\\\" color=\\\"danger\\\">{{info.header.tSo_Luong | number}}</ion-text>\\r\\n        </ion-note>\\r\\n      </ion-list-header>\\r\\n\\r\\n      <ion-item class=\\\"ion-no-margin\\\" *ngFor=\\\"let item of info.detail; let last = last;\\\"\\r\\n        [attr.lines]=\\\"!last?'full':'none'\\\">\\r\\n\\r\\n        <ion-label class=\\\"no-margin-horizontal ion-no-padding\\\">\\r\\n          <h3>\\r\\n            {{item.ten_Vt}}\\r\\n          </h3>\\r\\n          <p class=\\\"asp-color-medium\\\">\\r\\n            {{item.ma_Vt? \\\"Mã vật tư: \\\"+item.ma_Vt:\\\"\\\"}}\\r\\n          </p>\\r\\n          <p class=\\\"asp-color-medium\\\">\\r\\n            {{item.ma_Lo? \\\"Mã lô: \\\"+ item.ma_Lo:\\\"\\\"}}\\r\\n          </p>\\r\\n          <p class=\\\"asp-color-medium\\\">\\r\\n            {{item.ma_Sp? \\\"Mã sản phẩm: \\\"+item.ma_Sp:\\\"\\\"}}\\r\\n          </p>\\r\\n        </ion-label>\\r\\n\\r\\n        <ion-note slot=\\\"end\\\" class=\\\"ion-no-margin\\\" color=\\\"danger\\\" mode=\\\"ios\\\">\\r\\n          <ion-text class=\\\"ml-10\\\" color=\\\"danger\\\">{{item.so_Luong | number}}</ion-text>\\r\\n        </ion-note>\\r\\n        <ion-label>\\r\\n          <p>\\r\\n            <ion-text>{{item.ghi_Chu}}</ion-text>\\r\\n          </p>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n\\r\\n  </ng-container>\\r\\n\\r\\n  <ng-template #skeletonTmpl>\\r\\n    <ion-row class=\\\"info-top mt-20\\\">\\r\\n      <span class=\\\"icon-top\\\">\\r\\n        <ion-skeleton-text animated></ion-skeleton-text>\\r\\n      </span>\\r\\n      <ion-col size=\\\"12\\\" text-center class=\\\"mt-20\\\">\\r\\n        <ion-text color=\\\"medium\\\">\\r\\n          <p class=\\\"title info-top-text\\\">\\r\\n            <ion-skeleton-text animated style=\\\"width: 50%;margin: auto;\\\"></ion-skeleton-text>\\r\\n          </p>\\r\\n        </ion-text>\\r\\n        <h4 class=\\\"total info-top-text\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 50%;margin: auto;\\\"></ion-skeleton-text>\\r\\n        </h4>\\r\\n        <ion-text>\\r\\n          <ion-skeleton-text animated style=\\\"width: 50%;margin: auto;\\\"></ion-skeleton-text>\\r\\n        </ion-text>\\r\\n      </ion-col>\\r\\n    </ion-row>\\r\\n\\r\\n    <ion-list lines=\\\"none\\\" class=\\\"info-detail ion-margin-bottom\\\">\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list lines=\\\"none\\\" class=\\\"info-detail ion-margin-bottom\\\">\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list lines=\\\"none\\\" class=\\\"info-detail ion-margin-bottom\\\">\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item>\\r\\n        <ion-label class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n    </ion-list>\\r\\n\\r\\n    <ion-list class=\\\"info-detail product\\\">\\r\\n\\r\\n      <ion-list-header text-uppercase>\\r\\n        Sản phẩm\\r\\n      </ion-list-header>\\r\\n\\r\\n      <ion-item no-margin>\\r\\n        <ion-label no-margin-horizontal text-wrap no-padding>\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n      <ion-item no-margin>\\r\\n        <ion-label no-margin-horizontal text-wrap no-padding>\\r\\n          <ion-skeleton-text animated style=\\\"width: 100%\\\"></ion-skeleton-text>\\r\\n        </ion-label>\\r\\n      </ion-item>\\r\\n\\r\\n    </ion-list>\\r\\n  </ng-template>\\r\\n\\r\\n</ion-content>\";","export default \"<ion-header [translucent]=\\\"true\\\">\\r\\n  <ion-toolbar color=\\\"asp\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button [fill]=\\\"'clear'\\\" routerLink=\\\"/tabs/home\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" ios=\\\"chevron-back-outline\\\" md=\\\"arrow-back-outline\\\" size=\\\"default\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{ title[strMaCt] }}</ion-title>\\r\\n    <ion-buttons slot=\\\"end\\\" fill=\\\"clear\\\">\\r\\n      <ion-button>\\r\\n        <i class=\\\"material-icons\\\">sort_by_alpha</i>\\r\\n      </ion-button>\\r\\n      <!-- <ion-button (click)=\\\"openModalFilter()\\\">\\r\\n        <ion-icon slot=\\\"icon-only\\\" name=\\\"filter-sharp\\\" size=\\\"default\\\"></ion-icon>\\r\\n      </ion-button> -->\\r\\n    </ion-buttons>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\">\\r\\n  <ion-refresher slot=\\\"fixed\\\" (ionRefresh)=\\\"loadMoreData($event, true)\\\">\\r\\n    <ion-refresher-content></ion-refresher-content>\\r\\n  </ion-refresher>\\r\\n  <!-- <ion-fab vertical=\\\"bottom\\\" horizontal=\\\"end\\\" slot=\\\"fixed\\\">\\r\\n    <ion-fab-button *ngIf=\\\"perm?.allow_New\\\" (click)=\\\"edit({}, 78)\\\" color=\\\"asp\\\">\\r\\n      <ion-icon name=\\\"add\\\" size=\\\"large\\\"></ion-icon>\\r\\n    </ion-fab-button>\\r\\n  </ion-fab> -->\\r\\n\\r\\n  <ion-row>\\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <mat-form-field appearance=\\\"fill\\\" class=\\\"w-100\\\">\\r\\n        <mat-label>Lọc theo ngày</mat-label>\\r\\n        <mat-date-range-input [max]=\\\"today\\\" [rangePicker]=\\\"picker\\\" (click)=\\\"picker.open()\\\">\\r\\n          <input matStartDate [(ngModel)]=\\\"filterModel.ngay_Ct1\\\" disabled placeholder=\\\"Ngày bắt đầu\\\"\\r\\n            (focus)=\\\"picker.open()\\\" />\\r\\n          <input matEndDate [(ngModel)]=\\\"filterModel.ngay_Ct2\\\" (dateChange)=\\\"dateChange()\\\" disabled\\r\\n            placeholder=\\\"Ngày kết thúc\\\" (focus)=\\\"picker.open()\\\" />\\r\\n        </mat-date-range-input>\\r\\n        <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\" [disabled]=\\\"loading\\\"></mat-datepicker-toggle>\\r\\n        <mat-date-range-picker touchUi #picker [disabled]=\\\"loading\\\"></mat-date-range-picker>\\r\\n      </mat-form-field>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n\\r\\n  <ion-item>\\r\\n    <ion-label>Trạng thái</ion-label>\\r\\n    <ion-select (ionChange)=\\\"getList()\\\" [(ngModel)]=\\\"selectTrang_Thai\\\" [interfaceOptions]=\\\"selectTrang_Thai\\\"\\r\\n      interface=\\\"action-sheet\\\" placeholder=\\\"Chọn trạng thái\\\">\\r\\n      <ion-select-option value=\\\"0\\\">Chưa duyệt</ion-select-option>\\r\\n      <ion-select-option value=\\\"1\\\">Đã duyệt</ion-select-option>\\r\\n      <ion-select-option value=\\\"\\\">Tất cả</ion-select-option>\\r\\n    </ion-select>\\r\\n  </ion-item>\\r\\n\\r\\n  <app-asp-search [(aspModel)]=\\\"searchTerm\\\" (aspModelChange)=\\\"getList()\\\"></app-asp-search>\\r\\n  <ion-grid>\\r\\n    <ng-container *ngIf=\\\"!loading; else elseTemplate\\\">\\r\\n      <ion-list>\\r\\n        <ion-list-header>\\r\\n          <ion-label>\\r\\n            <p>\\r\\n              Tổng:&nbsp;<span style=\\\"font-size: 14px\\\" text-bold>{{\\r\\n                totalCount | number\\r\\n                }}</span>\\r\\n            </p>\\r\\n          </ion-label>\\r\\n        </ion-list-header>\\r\\n        <ion-item *ngFor=\\\"let item of data; trackBy: trackBy\\\" detail=\\\"false\\\">\\r\\n          <ion-label (click)=\\\"view_edit(item)\\\">\\r\\n            <h3 >\\r\\n              {{ item.ten_Dt }}\\r\\n            </h3>\\r\\n            <p>\\r\\n              <span >{{ item.dien_Giai }}</span>\\r\\n            </p>\\r\\n            <p>\\r\\n              <span class=\\\"date\\\">{{ item.ten_Kho }}</span>  \\r\\n            </p>\\r\\n            <p>\\r\\n              <span class=\\\"date\\\">{{ item.so_Ct }} - {{ item.ngay_Ct | formatDate }}</span>\\r\\n            </p>\\r\\n            \\r\\n          </ion-label>\\r\\n          <ion-button fill=\\\"clear\\\" [matMenuTriggerFor]=\\\"menu\\\" slot=\\\"start\\\" color=\\\"medium\\\">\\r\\n            <ion-icon slot=\\\"start\\\" *ngIf=\\\"item.is_App; else desktopIcon\\\" name=\\\"phone-portrait-outline\\\"\\r\\n              [color]=\\\"item.duyet ? 'asp' : 'danger'\\\">\\r\\n            </ion-icon>\\r\\n            <ng-template #desktopIcon>\\r\\n              <ion-icon slot=\\\"start\\\" name=\\\"desktop-outline\\\" [color]=\\\"\\r\\n                  item.ten_TrangThai == 'Đã duyệt' ? 'secondary' : 'danger'\\r\\n                \\\"></ion-icon>\\r\\n            </ng-template>\\r\\n          </ion-button>\\r\\n\\r\\n          <mat-menu #menu=\\\"matMenu\\\">\\r\\n            <!-- <button mat-menu-item *ngIf=\\\"perm?.allow_View\\\" (click)=\\\"view_edit(item)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">preview</i>\\r\\n              <span>Xem phiếu</span>\\r\\n            </button>\\r\\n            <button mat-menu-item *ngIf=\\\"perm?.allow_Edit\\\" (click)=\\\"edit(item, 69)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">create</i>\\r\\n              <span>Sửa phiếu</span>\\r\\n            </button>\\r\\n            <button *ngIf=\\\"item.ma_Ct != 'DC'\\\" mat-menu-item (click)=\\\"edit(item, 86)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n                      class=\\\"icon\\\">note_add</i>\\r\\n              <span>{{\\r\\n                strMaCt == \\\"PN\\\" || strMaCt == \\\"TP\\\"\\r\\n                ? \\\"Tạo phiếu xuất\\\"\\r\\n                : \\\"Tạo phiếu nhập\\\"\\r\\n                }}</span>\\r\\n            </button>-->\\r\\n            \\r\\n            \\r\\n            <button *ngIf=\\\"!item.duyet && perm_duyet?.allow_Access\\\" mat-menu-item (click)=\\\"confirm(item, true)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">check_circle</i>\\r\\n              <span>Duyệt</span>\\r\\n            </button>\\r\\n            <button *ngIf=\\\"item.duyet && perm_duyet?.allow_Access\\\" mat-menu-item (click)=\\\"confirm(item, false)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">block</i>\\r\\n              <span>Bỏ duyệt</span>\\r\\n            </button> \\r\\n\\r\\n            <button mat-menu-item (click)=\\\"exportPDF(item)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">picture_as_pdf</i>\\r\\n              <span>Xem file PDF</span>\\r\\n            </button>\\r\\n\\r\\n            <button mat-menu-item (click)=\\\"signPDF(item,'1')\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">picture_as_pdf</i>\\r\\n              <span>Ký duyệt kho</span>\\r\\n            </button>\\r\\n\\r\\n            <button mat-menu-item (click)=\\\"signPDF(item,'2')\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">picture_as_pdf</i>\\r\\n              <span>Ký duyệt NV</span>\\r\\n            </button>\\r\\n            <!-- <button mat-menu-item *ngIf=\\\"perm?.allow_Delete\\\" (click)=\\\"delete(item)\\\">\\r\\n              <i [ngClass]=\\\"platformStr =='ios' && isNativePlatform?'material-icons-outlined':'material-icons'\\\"\\r\\n              class=\\\"icon\\\">delete</i>\\r\\n              <span>Xoá</span>\\r\\n            </button> -->\\r\\n          </mat-menu>\\r\\n        </ion-item>\\r\\n      </ion-list>\\r\\n    </ng-container>\\r\\n\\r\\n    <ng-template #elseTemplate>\\r\\n      <asp-skeleton></asp-skeleton>\\r\\n    </ng-template>\\r\\n  </ion-grid>\\r\\n\\r\\n  <ion-infinite-scroll threshold=\\\"100px\\\" (ionInfinite)=\\\"loadMoreData($event)\\\">\\r\\n    <ion-infinite-scroll-content loadingSpinner=\\\"bubbles\\\" loadingText=\\\"Loading more data...\\\">\\r\\n    </ion-infinite-scroll-content>\\r\\n  </ion-infinite-scroll>\\r\\n</ion-content>\";","export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-button (click)=\\\"closeModal()\\\" fill=\\\"clear\\\">\\n        <ion-icon name=\\\"close-outline\\\" size=\\\"large\\\"></ion-icon>\\n      </ion-button>\\n    </ion-buttons>\\n    <ion-title>\\n      Signature\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content class=\\\"ion-padding\\\" >\\n  <div class=\\\"signature-container\\\">\\n    <signature-pad [options]=\\\"signaturePadOptions\\\" (onBeginEvent)=\\\"drawStart()\\\" (onEndEvent)=\\\"drawComplete()\\\"></signature-pad>\\n    <ion-grid>\\n      <ion-row>\\n        <ion-col size=\\\"6\\\">\\n          <ion-button color=\\\"danger\\\" (click)=\\\"clearPad()\\\">Clear</ion-button>\\n        </ion-col>\\n        <ion-col size=\\\"4\\\" offset=\\\"2\\\">\\n          <ion-button color=\\\"secondary\\\" (click)=\\\"savePad()\\\">Save</ion-button>\\n        </ion-col>\\n      </ion-row>\\n    </ion-grid>\\n  </div>\\n  <ng-container *ngIf =\\\"signatureImg!\\\">\\n    <img [src]=\\\"signatureImg | displayAvatar\\\" >\\n  </ng-container>\\n</ion-content>\\n\\n\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"asp\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"closeModal()\\\" fill=\\\"clear\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\" size=\\\"large\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Chỉnh sửa vật tư</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" color=\\\"light\\\" class=\\\"p-8\\\">\\r\\n  <ion-grid>\\r\\n    <form role=\\\"form\\\" #fdInfo=\\\"ngForm\\\">\\r\\n      <ion-row>\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <mat-form-field appearance=\\\"fill\\\">\\r\\n            <mat-label>Vật tư</mat-label>\\r\\n            <input readonly=\\\"true\\\" matInput name=\\\"ma_Vt\\\" autocomplete=\\\"off\\\" [(ngModel)]=\\\"model.ma_Vt\\\" />\\r\\n            <mat-hint align=\\\"end\\\">{{ model?.ten_Vt }}</mat-hint>\\r\\n          </mat-form-field>\\r\\n        </ion-col>\\r\\n\\r\\n        <ng-container *ngIf=\\\"strMa_Ct_PX.includes(strMaCt)\\\">\\r\\n          <ion-col size=\\\"12\\\">\\r\\n            <mat-form-field appearance=\\\"fill\\\">\\r\\n              <mat-label>Mã lô</mat-label>\\r\\n              <mat-select name=\\\"ma_Lo\\\" [(ngModel)]=\\\"model.ma_Lo\\\">\\r\\n                <mat-option *ngFor=\\\"let op of listMa_Lo\\\" [value]=\\\"op.ma_Lo\\\">\\r\\n                  {{ op.ma_Lo }}\\r\\n                </mat-option>\\r\\n              </mat-select>\\r\\n\\r\\n            </mat-form-field>\\r\\n          </ion-col>\\r\\n        </ng-container>\\r\\n\\r\\n        <ng-container *ngIf=\\\"!strMa_Ct_PX.includes(strMaCt)\\\">\\r\\n          <ion-col size=\\\"12\\\">\\r\\n            <mat-form-field appearance=\\\"fill\\\">\\r\\n              <mat-label>Mã lô</mat-label>\\r\\n              <input  matInput name=\\\"ma_Lo\\\" autocomplete=\\\"off\\\" [(ngModel)]=\\\"model.ma_Lo\\\" />\\r\\n            </mat-form-field>\\r\\n          </ion-col>\\r\\n        </ng-container>\\r\\n      \\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <mat-form-field appearance=\\\"fill\\\">\\r\\n            <mat-label>Hạn sử dụng</mat-label>\\r\\n            <input matInput name=\\\"han_Sd\\\" [(ngModel)]=\\\"model.han_Sd\\\" required [matDatepicker]=\\\"picker\\\"\\r\\n              (focus)=\\\"picker.open()\\\" />\\r\\n            <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\"></mat-datepicker-toggle>\\r\\n            <mat-datepicker #picker touchUi color=\\\"primary\\\"></mat-datepicker>\\r\\n          </mat-form-field>\\r\\n        </ion-col>\\r\\n\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <mat-form-field appearance=\\\"fill\\\">\\r\\n            <mat-label>Mã sản phẩm</mat-label>\\r\\n            <input matInput name=\\\"ma_Sp\\\" autocomplete=\\\"off\\\" (focus)=\\\"openFilterProductsModal()\\\"\\r\\n              [(ngModel)]=\\\"model.ma_Sp\\\" />\\r\\n            <button style=\\\"font-size: 18px\\\" (click)=\\\"clearCusMa_SP($event)\\\" *ngIf=\\\"model?.ma_Sp\\\" mat-icon-button\\r\\n              matSuffix>\\r\\n              <mat-icon>clear</mat-icon>\\r\\n            </button>\\r\\n            <!-- <mat-hint align=\\\"end\\\">{{ model.header?.ten_Dt }}</mat-hint> -->\\r\\n          </mat-form-field>\\r\\n        </ion-col>\\r\\n\\r\\n        <ion-col size=\\\"12\\\">\\r\\n          <mat-form-field appearance=\\\"fill\\\">\\r\\n            <mat-label>Số lượng</mat-label>\\r\\n            <input matInput type=\\\"number\\\" name=\\\"so_Luong9\\\" autocomplete=\\\"off\\\" [(ngModel)]=\\\"model.so_Luong9\\\" />\\r\\n            <button style=\\\"font-size: 18px\\\" *ngIf=\\\"model.so_Luong9\\\" mat-icon-button matSuffix>\\r\\n              <mat-icon>clear</mat-icon>\\r\\n            </button>\\r\\n          </mat-form-field>\\r\\n        </ion-col>\\r\\n\\r\\n        <ng-container *ngIf=\\\"strMaCt != 'DC'\\\">\\r\\n          <ion-col size=\\\"4\\\">\\r\\n            <mat-form-field appearance=\\\"fill\\\">\\r\\n              <mat-label>Số SO</mat-label>\\r\\n              <mat-select name=\\\"so_SO\\\" [(ngModel)]=\\\"model.so_Ct_SO\\\">\\r\\n                <mat-option *ngFor=\\\"let op of listSO\\\" [value]=\\\"op.so_Ct\\\">\\r\\n                  {{ op.so_Ct }}\\r\\n                </mat-option>\\r\\n              </mat-select>\\r\\n            </mat-form-field>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"4\\\">\\r\\n            <mat-form-field appearance=\\\"fill\\\">\\r\\n              <mat-label>Số LSX</mat-label>\\r\\n              <mat-select name=\\\"so_LSX\\\" [(ngModel)]=\\\"model.so_Ct_LSX\\\">\\r\\n                <mat-option *ngFor=\\\"let op of listLSX\\\" [value]=\\\"op.so_Ct\\\">\\r\\n                  {{ op.so_Ct }}\\r\\n                </mat-option>\\r\\n              </mat-select>\\r\\n            </mat-form-field>\\r\\n          </ion-col>\\r\\n\\r\\n          <ion-col size=\\\"4\\\">\\r\\n            <mat-form-field appearance=\\\"fill\\\">\\r\\n              <mat-label>Số KHSX</mat-label>\\r\\n              <mat-select name=\\\"so_KHSX\\\" [(ngModel)]=\\\"model.so_Ct_KHSX\\\">\\r\\n                <mat-option *ngFor=\\\"let op of listKHSX\\\" [value]=\\\"op.so_Ct\\\">\\r\\n                  {{ op.so_Ct }}\\r\\n                </mat-option>\\r\\n              </mat-select>\\r\\n            </mat-form-field>\\r\\n          </ion-col>\\r\\n        </ng-container>\\r\\n      </ion-row>\\r\\n    </form>\\r\\n  </ion-grid>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer color=\\\"bgcolor\\\" class=\\\"bg-footer ion-no-border\\\">\\r\\n  <ion-item color=\\\"bgcolor\\\" class=\\\"ion-text-center pt-8 pb-8\\\" lines=\\\"none\\\">\\r\\n    <ion-label class=\\\"ion-no-padding ion-text-center ion-no-margin\\\">\\r\\n      <ion-button (click)=\\\"closeModal()\\\" expand=\\\"block\\\" size=\\\"default\\\" color=\\\"asp\\\">\\r\\n        <span>Hoàn tất</span>\\r\\n        <ion-icon name=\\\"checkmark-done-sharp\\\" slot=\\\"start\\\" size=\\\"default\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-label>\\r\\n  </ion-item>\\r\\n</ion-footer>\";","export default \"<ion-row>\\r\\n\\r\\n\\r\\n  <ion-col size=\\\"12\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Kho</mat-label>\\r\\n      <mat-select name=\\\"ma_Kho\\\" [(ngModel)]=\\\"model.header.ma_Kho\\\" required>\\r\\n        <mat-option *ngFor=\\\"let op of inventories\\\" [value]=\\\"op.ma_Kho\\\">\\r\\n          {{ op.ten_Kho }}\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n\\r\\n  <!-- [disabled]=\\\"model.header.ma_Ct='DC'\\\" -->\\r\\n  <ng-container *ngIf=\\\"strMaCt == 'DC'\\\">\\r\\n    <ion-col size=\\\"12\\\">\\r\\n      <mat-form-field appearance=\\\"fill\\\">\\r\\n        <mat-label>Kho nhập</mat-label>\\r\\n        <mat-select name=\\\"ma_KhoN\\\" [(ngModel)]=\\\"model.header.ma_KhoN\\\" required>\\r\\n          <mat-option *ngFor=\\\"let op of inventories\\\" [value]=\\\"op.ma_Kho\\\">\\r\\n            {{ op.ten_Kho }}\\r\\n          </mat-option>\\r\\n        </mat-select>\\r\\n      </mat-form-field>\\r\\n    </ion-col>\\r\\n  </ng-container>\\r\\n\\r\\n  <ion-col size=\\\"12\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Loại nhập xuất</mat-label>\\r\\n      <mat-select name=\\\"Ma_LoaiNX\\\" [(ngModel)]=\\\"model.header.ma_LoaiNX\\\" required>\\r\\n        <mat-option *ngFor=\\\"let op of listLoaiNhapXuat\\\" [value]=\\\"op.ma_LoaiNX\\\">\\r\\n          {{ op.ten_LoaiNX }}\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n\\r\\n  <ion-col size=\\\"7\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Ngày</mat-label>\\r\\n      <input matInput name=\\\"ngay_Ct\\\" [max]=\\\"today\\\" [(ngModel)]=\\\"model.header.ngay_Ct\\\" required [matDatepicker]=\\\"picker\\\"\\r\\n        (focus)=\\\"picker.open()\\\" />\\r\\n      <mat-datepicker-toggle matSuffix [for]=\\\"picker\\\"></mat-datepicker-toggle>\\r\\n      <mat-datepicker #picker touchUi color=\\\"primary\\\"></mat-datepicker>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n\\r\\n  <ion-col size=\\\"5\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Số Chứng từ</mat-label>\\r\\n      <input matInput readonly name=\\\"so_Ct\\\" [(ngModel)]=\\\"model.header.so_Ct\\\">\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n\\r\\n\\r\\n  <ion-col size=\\\"12\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Khách hàng</mat-label>\\r\\n      <input matInput name=\\\"ma_Dt\\\" autocomplete=\\\"off\\\" (focus)=\\\"openFilterCustomersModal()\\\"\\r\\n        [(ngModel)]=\\\"model.header.ma_Dt\\\" />\\r\\n      <button style=\\\"font-size: 18px\\\" (click)=\\\"clearCus($event)\\\" *ngIf=\\\"model.header?.ma_Dt\\\" mat-icon-button matSuffix>\\r\\n        <mat-icon>clear</mat-icon>\\r\\n      </button>\\r\\n      <mat-hint align=\\\"end\\\">{{ model.header?.ten_Dt }}</mat-hint>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n\\r\\n\\r\\n\\r\\n  <ion-col size=\\\"6\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Mã nhân viên</mat-label>\\r\\n      <mat-select name=\\\"ma_cbnv\\\" [(ngModel)]=\\\"model.header.ma_CbNv\\\">\\r\\n        <mat-option *ngFor=\\\"let op of listEmployees\\\" [value]=\\\"op.ma_CbNv\\\">\\r\\n          {{ op.ten_CbNv }}\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n  <ion-col size=\\\"6\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Mã bộ phận</mat-label>\\r\\n      <mat-select name=\\\"ma_Bp\\\" [(ngModel)]=\\\"model.header.ma_Bp\\\">\\r\\n        <mat-option *ngFor=\\\"let op of listDepartment\\\" [value]=\\\"op.ma_Bp\\\">\\r\\n          {{ op.ten_Bp }}\\r\\n        </mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n\\r\\n  <ng-container *ngIf=\\\"strMaCt != 'DC'\\\">\\r\\n    <ion-col size=\\\"4\\\" >\\r\\n      <mat-form-field appearance=\\\"fill\\\">\\r\\n        <mat-label>Số SO</mat-label>\\r\\n        <mat-select name=\\\"so_SO\\\" [(ngModel)]=\\\"model.header.so_Ct_SO\\\">\\r\\n          <mat-option *ngFor=\\\"let op of listSO\\\" [value]=\\\"op.so_Ct\\\">\\r\\n            {{ op.so_Ct }}\\r\\n          </mat-option>\\r\\n        </mat-select>\\r\\n      </mat-form-field>\\r\\n    </ion-col>\\r\\n  \\r\\n    <ion-col size=\\\"4\\\">\\r\\n      <mat-form-field appearance=\\\"fill\\\">\\r\\n        <mat-label>Số LSX</mat-label>\\r\\n        <mat-select name=\\\"so_LSX\\\" [(ngModel)]=\\\"model.header.so_Ct_LSX\\\">\\r\\n          <mat-option *ngFor=\\\"let op of listLSX\\\" [value]=\\\"op.so_Ct\\\">\\r\\n            {{ op.so_Ct }}\\r\\n          </mat-option>\\r\\n        </mat-select>\\r\\n      </mat-form-field>\\r\\n    </ion-col>\\r\\n  \\r\\n    <ion-col size=\\\"4\\\">\\r\\n      <mat-form-field appearance=\\\"fill\\\">\\r\\n        <mat-label>Số KHSX</mat-label>\\r\\n        <mat-select name=\\\"so_KHSX\\\" [(ngModel)]=\\\"model.header.so_Ct_KHSX\\\">\\r\\n          <mat-option *ngFor=\\\"let op of listKHSX\\\" [value]=\\\"op.so_Ct\\\">\\r\\n            {{ op.so_Ct }}\\r\\n          </mat-option>\\r\\n        </mat-select>\\r\\n      </mat-form-field>\\r\\n    </ion-col>\\r\\n  </ng-container>\\r\\n\\r\\n  <ion-col size=\\\"12\\\">\\r\\n    <mat-form-field appearance=\\\"fill\\\">\\r\\n      <mat-label>Diễn Giải</mat-label>\\r\\n      <textarea matInput name=\\\"dien_Giai\\\" rows=\\\"3\\\" [(ngModel)]=\\\"model.header.dien_Giai\\\"></textarea>\\r\\n    </mat-form-field>\\r\\n  </ion-col>\\r\\n</ion-row>\";","export default \"<ion-row>\\r\\n  <ion-col size=\\\"10\\\">\\r\\n    <ion-searchbar class=\\\"m-0 p-0\\\" [ngModelOptions]=\\\"{standalone: true}\\\" showCancelButton=\\\"never\\\"\\r\\n      (ionFocus)=\\\"openFilterProductsModal()\\\" [(ngModel)]=\\\"searchTerm\\\" placeholder=\\\"Tìm kiếm và chọn sản phẩm...\\\">\\r\\n    </ion-searchbar>\\r\\n  </ion-col>\\r\\n  <ion-col size=\\\"2\\\">\\r\\n    <ion-button (click)=\\\"productScanner()\\\" fill=\\\"clear\\\" class=\\\"ion-no-margin mt-8 p-0 btn-scan\\\" color=\\\"medium\\\">\\r\\n      <ion-icon slot=\\\"icon-only\\\" size=\\\"large\\\" name=\\\"scan-sharp\\\"></ion-icon>\\r\\n    </ion-button>\\r\\n  </ion-col>\\r\\n</ion-row>\\r\\n\\r\\n<ng-container>\\r\\n  <ion-row>\\r\\n    <ion-col>\\r\\n      <ion-list>\\r\\n        <ion-item class=\\\"ion-no-padding\\\" *ngFor=\\\"let item of this.model.detail;let last = last;\\\">\\r\\n          <ion-label>\\r\\n            <h2>{{item.ten_Vt}}</h2>\\r\\n            <p class=\\\"asp-color-medium\\\">\\r\\n               {{\\\"Mã vật tư: \\\"+ item.ma_Vt}}\\r\\n            </p>\\r\\n            <p class=\\\"asp-color-medium\\\">\\r\\n              {{item.ma_Lo? \\\"Mã lô: \\\"+ item.ma_Lo:\\\"\\\"}}\\r\\n            </p>\\r\\n            <p class=\\\"asp-color-medium\\\">\\r\\n              {{item.ma_Sp? \\\"Mã sản phẩm: \\\"+item.ma_Sp:\\\"\\\"}}\\r\\n            </p>\\r\\n            <p>Số lượng:&nbsp;\\r\\n              <!-- <span class=\\\"asp-color-danger\\\">{{item.so_Luong9}}</span> -->\\r\\n              <span class=\\\"quantity ion-text-center\\\">\\r\\n                <ion-button\\r\\n                  class=\\\"ion-no-margin ion-no-padding\\\" fill=\\\"clear\\\" slot=\\\"start\\\"\\r\\n                  (click)=\\\"changeQty(item,'previous')\\\" color=\\\"medium\\\">\\r\\n                  <ion-icon slot=\\\"icon-only\\\" name=\\\"remove\\\" size=\\\"small\\\"></ion-icon>\\r\\n                </ion-button>\\r\\n                <ion-button size=\\\"small\\\" style=\\\"width: 70px;\\\"\\r\\n                  fill=\\\"outline\\\" slot=\\\"start\\\" color=\\\"asp\\\" (click)=\\\"updateQty(item)\\\"\\r\\n                  class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n                  {{item.so_Luong9}}\\r\\n                </ion-button>\\r\\n                <ion-button  fill=\\\"clear\\\"\\r\\n                  (click)=\\\"changeQty(item,'next')\\\" color=\\\"medium\\\" class=\\\"ion-no-margin ion-no-padding\\\">\\r\\n                  <ion-icon slot=\\\"icon-only\\\" name=\\\"add\\\" size=\\\"small\\\"></ion-icon>\\r\\n                </ion-button>\\r\\n              </span>\\r\\n            </p>\\r\\n          </ion-label>\\r\\n\\r\\n          <ion-button fill=\\\"clear\\\" [matMenuTriggerFor]=\\\"menu\\\" class=\\\"ion-no-margin ion-no-padding\\\" slot=\\\"end\\\"\\r\\n            color=\\\"medium\\\">\\r\\n            <ion-icon slot=\\\"icon-only\\\" name=\\\"ellipsis-vertical-sharp\\\" size=\\\"default\\\"></ion-icon>\\r\\n          </ion-button>\\r\\n          <mat-menu #menu=\\\"matMenu\\\">\\r\\n            <button mat-menu-item (click)=\\\"edit(item)\\\">\\r\\n              <mat-icon>flip_to_front</mat-icon>\\r\\n              <span>Sửa</span>\\r\\n            </button>\\r\\n            <button mat-menu-item (click)=\\\"removeProduct(item)\\\">\\r\\n              <mat-icon>delete</mat-icon>\\r\\n              <span>Xóa</span>\\r\\n            </button>\\r\\n          </mat-menu>\\r\\n        </ion-item>\\r\\n\\r\\n      </ion-list>\\r\\n    </ion-col>\\r\\n  </ion-row>\\r\\n</ng-container>\";","/*!\n * Signature Pad v2.3.2\n * https://github.com/szimek/signature_pad\n *\n * Copyright 2017 Szymon Nowak\n * Released under the MIT license\n *\n * The main idea and some parts of the code (e.g. drawing variable width Bézier curve) are taken from:\n * http://corner.squareup.com/2012/07/smoother-signatures.html\n *\n * Implementation of interpolation using cubic Bézier curves is taken from:\n * http://benknowscode.wordpress.com/2012/09/14/path-interpolation-using-cubic-bezier-and-control-point-estimation-in-javascript\n *\n * Algorithm for approximated length of a Bézier curve is taken from:\n * http://www.lemoda.net/maths/bezier-length/index.html\n *\n */\n\nfunction Point(x, y, time) {\n  this.x = x;\n  this.y = y;\n  this.time = time || new Date().getTime();\n}\n\nPoint.prototype.velocityFrom = function (start) {\n  return this.time !== start.time ? this.distanceTo(start) / (this.time - start.time) : 1;\n};\n\nPoint.prototype.distanceTo = function (start) {\n  return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));\n};\n\nPoint.prototype.equals = function (other) {\n  return this.x === other.x && this.y === other.y && this.time === other.time;\n};\n\nfunction Bezier(startPoint, control1, control2, endPoint) {\n  this.startPoint = startPoint;\n  this.control1 = control1;\n  this.control2 = control2;\n  this.endPoint = endPoint;\n}\n\n// Returns approximated length.\nBezier.prototype.length = function () {\n  var steps = 10;\n  var length = 0;\n  var px = void 0;\n  var py = void 0;\n\n  for (var i = 0; i <= steps; i += 1) {\n    var t = i / steps;\n    var cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);\n    var cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);\n    if (i > 0) {\n      var xdiff = cx - px;\n      var ydiff = cy - py;\n      length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n    }\n    px = cx;\n    py = cy;\n  }\n\n  return length;\n};\n\n/* eslint-disable no-multi-spaces, space-in-parens */\nBezier.prototype._point = function (t, start, c1, c2, end) {\n  return start * (1.0 - t) * (1.0 - t) * (1.0 - t) + 3.0 * c1 * (1.0 - t) * (1.0 - t) * t + 3.0 * c2 * (1.0 - t) * t * t + end * t * t * t;\n};\n\n/* eslint-disable */\n\n// http://stackoverflow.com/a/27078401/815507\nfunction throttle(func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n  var later = function later() {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    return result;\n  };\n}\n\nfunction SignaturePad(canvas, options) {\n  var self = this;\n  var opts = options || {};\n\n  this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;\n  this.minWidth = opts.minWidth || 0.5;\n  this.maxWidth = opts.maxWidth || 2.5;\n  this.throttle = 'throttle' in opts ? opts.throttle : 16; // in miliseconds\n  this.minDistance = 'minDistance' in opts ? opts.minDistance : 5;\n\n  if (this.throttle) {\n    this._strokeMoveUpdate = throttle(SignaturePad.prototype._strokeUpdate, this.throttle);\n  } else {\n    this._strokeMoveUpdate = SignaturePad.prototype._strokeUpdate;\n  }\n\n  this.dotSize = opts.dotSize || function () {\n    return (this.minWidth + this.maxWidth) / 2;\n  };\n  this.penColor = opts.penColor || 'black';\n  this.backgroundColor = opts.backgroundColor || 'rgba(0,0,0,0)';\n  this.onBegin = opts.onBegin;\n  this.onEnd = opts.onEnd;\n\n  this._canvas = canvas;\n  this._ctx = canvas.getContext('2d');\n  this.clear();\n\n  // We need add these inline so they are available to unbind while still having\n  // access to 'self' we could use _.bind but it's not worth adding a dependency.\n  this._handleMouseDown = function (event) {\n    if (event.which === 1) {\n      self._mouseButtonDown = true;\n      self._strokeBegin(event);\n    }\n  };\n\n  this._handleMouseMove = function (event) {\n    if (self._mouseButtonDown) {\n      self._strokeMoveUpdate(event);\n    }\n  };\n\n  this._handleMouseUp = function (event) {\n    if (event.which === 1 && self._mouseButtonDown) {\n      self._mouseButtonDown = false;\n      self._strokeEnd(event);\n    }\n  };\n\n  this._handleTouchStart = function (event) {\n    if (event.targetTouches.length === 1) {\n      var touch = event.changedTouches[0];\n      self._strokeBegin(touch);\n    }\n  };\n\n  this._handleTouchMove = function (event) {\n    // Prevent scrolling.\n    event.preventDefault();\n\n    var touch = event.targetTouches[0];\n    self._strokeMoveUpdate(touch);\n  };\n\n  this._handleTouchEnd = function (event) {\n    var wasCanvasTouched = event.target === self._canvas;\n    if (wasCanvasTouched) {\n      event.preventDefault();\n      self._strokeEnd(event);\n    }\n  };\n\n  // Enable mouse and touch event handlers\n  this.on();\n}\n\n// Public methods\nSignaturePad.prototype.clear = function () {\n  var ctx = this._ctx;\n  var canvas = this._canvas;\n\n  ctx.fillStyle = this.backgroundColor;\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.fillRect(0, 0, canvas.width, canvas.height);\n\n  this._data = [];\n  this._reset();\n  this._isEmpty = true;\n};\n\nSignaturePad.prototype.fromDataURL = function (dataUrl) {\n  var _this = this;\n\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  var image = new Image();\n  var ratio = options.ratio || window.devicePixelRatio || 1;\n  var width = options.width || this._canvas.width / ratio;\n  var height = options.height || this._canvas.height / ratio;\n\n  this._reset();\n  image.src = dataUrl;\n  image.onload = function () {\n    _this._ctx.drawImage(image, 0, 0, width, height);\n  };\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype.toDataURL = function (type) {\n  var _canvas;\n\n  switch (type) {\n    case 'image/svg+xml':\n      return this._toSVG();\n    default:\n      for (var _len = arguments.length, options = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        options[_key - 1] = arguments[_key];\n      }\n\n      return (_canvas = this._canvas).toDataURL.apply(_canvas, [type].concat(options));\n  }\n};\n\nSignaturePad.prototype.on = function () {\n  this._handleMouseEvents();\n  this._handleTouchEvents();\n};\n\nSignaturePad.prototype.off = function () {\n  this._canvas.removeEventListener('mousedown', this._handleMouseDown);\n  this._canvas.removeEventListener('mousemove', this._handleMouseMove);\n  document.removeEventListener('mouseup', this._handleMouseUp);\n\n  this._canvas.removeEventListener('touchstart', this._handleTouchStart);\n  this._canvas.removeEventListener('touchmove', this._handleTouchMove);\n  this._canvas.removeEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype.isEmpty = function () {\n  return this._isEmpty;\n};\n\n// Private methods\nSignaturePad.prototype._strokeBegin = function (event) {\n  this._data.push([]);\n  this._reset();\n  this._strokeUpdate(event);\n\n  if (typeof this.onBegin === 'function') {\n    this.onBegin(event);\n  }\n};\n\nSignaturePad.prototype._strokeUpdate = function (event) {\n  var x = event.clientX;\n  var y = event.clientY;\n\n  var point = this._createPoint(x, y);\n  var lastPointGroup = this._data[this._data.length - 1];\n  var lastPoint = lastPointGroup && lastPointGroup[lastPointGroup.length - 1];\n  var isLastPointTooClose = lastPoint && point.distanceTo(lastPoint) < this.minDistance;\n\n  // Skip this point if it's too close to the previous one\n  if (!(lastPoint && isLastPointTooClose)) {\n    var _addPoint = this._addPoint(point),\n        curve = _addPoint.curve,\n        widths = _addPoint.widths;\n\n    if (curve && widths) {\n      this._drawCurve(curve, widths.start, widths.end);\n    }\n\n    this._data[this._data.length - 1].push({\n      x: point.x,\n      y: point.y,\n      time: point.time,\n      color: this.penColor\n    });\n  }\n};\n\nSignaturePad.prototype._strokeEnd = function (event) {\n  var canDrawCurve = this.points.length > 2;\n  var point = this.points[0]; // Point instance\n\n  if (!canDrawCurve && point) {\n    this._drawDot(point);\n  }\n\n  if (point) {\n    var lastPointGroup = this._data[this._data.length - 1];\n    var lastPoint = lastPointGroup[lastPointGroup.length - 1]; // plain object\n\n    // When drawing a dot, there's only one point in a group, so without this check\n    // such group would end up with exactly the same 2 points.\n    if (!point.equals(lastPoint)) {\n      lastPointGroup.push({\n        x: point.x,\n        y: point.y,\n        time: point.time,\n        color: this.penColor\n      });\n    }\n  }\n\n  if (typeof this.onEnd === 'function') {\n    this.onEnd(event);\n  }\n};\n\nSignaturePad.prototype._handleMouseEvents = function () {\n  this._mouseButtonDown = false;\n\n  this._canvas.addEventListener('mousedown', this._handleMouseDown);\n  this._canvas.addEventListener('mousemove', this._handleMouseMove);\n  document.addEventListener('mouseup', this._handleMouseUp);\n};\n\nSignaturePad.prototype._handleTouchEvents = function () {\n  // Pass touch events to canvas element on mobile IE11 and Edge.\n  this._canvas.style.msTouchAction = 'none';\n  this._canvas.style.touchAction = 'none';\n\n  this._canvas.addEventListener('touchstart', this._handleTouchStart);\n  this._canvas.addEventListener('touchmove', this._handleTouchMove);\n  this._canvas.addEventListener('touchend', this._handleTouchEnd);\n};\n\nSignaturePad.prototype._reset = function () {\n  this.points = [];\n  this._lastVelocity = 0;\n  this._lastWidth = (this.minWidth + this.maxWidth) / 2;\n  this._ctx.fillStyle = this.penColor;\n};\n\nSignaturePad.prototype._createPoint = function (x, y, time) {\n  var rect = this._canvas.getBoundingClientRect();\n\n  return new Point(x - rect.left, y - rect.top, time || new Date().getTime());\n};\n\nSignaturePad.prototype._addPoint = function (point) {\n  var points = this.points;\n  var tmp = void 0;\n\n  points.push(point);\n\n  if (points.length > 2) {\n    // To reduce the initial lag make it work with 3 points\n    // by copying the first point to the beginning.\n    if (points.length === 3) points.unshift(points[0]);\n\n    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);\n    var c2 = tmp.c2;\n    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);\n    var c3 = tmp.c1;\n    var curve = new Bezier(points[1], c2, c3, points[2]);\n    var widths = this._calculateCurveWidths(curve);\n\n    // Remove the first element from the list,\n    // so that we always have no more than 4 points in points array.\n    points.shift();\n\n    return { curve: curve, widths: widths };\n  }\n\n  return {};\n};\n\nSignaturePad.prototype._calculateCurveControlPoints = function (s1, s2, s3) {\n  var dx1 = s1.x - s2.x;\n  var dy1 = s1.y - s2.y;\n  var dx2 = s2.x - s3.x;\n  var dy2 = s2.y - s3.y;\n\n  var m1 = { x: (s1.x + s2.x) / 2.0, y: (s1.y + s2.y) / 2.0 };\n  var m2 = { x: (s2.x + s3.x) / 2.0, y: (s2.y + s3.y) / 2.0 };\n\n  var l1 = Math.sqrt(dx1 * dx1 + dy1 * dy1);\n  var l2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);\n\n  var dxm = m1.x - m2.x;\n  var dym = m1.y - m2.y;\n\n  var k = l2 / (l1 + l2);\n  var cm = { x: m2.x + dxm * k, y: m2.y + dym * k };\n\n  var tx = s2.x - cm.x;\n  var ty = s2.y - cm.y;\n\n  return {\n    c1: new Point(m1.x + tx, m1.y + ty),\n    c2: new Point(m2.x + tx, m2.y + ty)\n  };\n};\n\nSignaturePad.prototype._calculateCurveWidths = function (curve) {\n  var startPoint = curve.startPoint;\n  var endPoint = curve.endPoint;\n  var widths = { start: null, end: null };\n\n  var velocity = this.velocityFilterWeight * endPoint.velocityFrom(startPoint) + (1 - this.velocityFilterWeight) * this._lastVelocity;\n\n  var newWidth = this._strokeWidth(velocity);\n\n  widths.start = this._lastWidth;\n  widths.end = newWidth;\n\n  this._lastVelocity = velocity;\n  this._lastWidth = newWidth;\n\n  return widths;\n};\n\nSignaturePad.prototype._strokeWidth = function (velocity) {\n  return Math.max(this.maxWidth / (velocity + 1), this.minWidth);\n};\n\nSignaturePad.prototype._drawPoint = function (x, y, size) {\n  var ctx = this._ctx;\n\n  ctx.moveTo(x, y);\n  ctx.arc(x, y, size, 0, 2 * Math.PI, false);\n  this._isEmpty = false;\n};\n\nSignaturePad.prototype._drawCurve = function (curve, startWidth, endWidth) {\n  var ctx = this._ctx;\n  var widthDelta = endWidth - startWidth;\n  var drawSteps = Math.floor(curve.length());\n\n  ctx.beginPath();\n\n  for (var i = 0; i < drawSteps; i += 1) {\n    // Calculate the Bezier (x, y) coordinate for this step.\n    var t = i / drawSteps;\n    var tt = t * t;\n    var ttt = tt * t;\n    var u = 1 - t;\n    var uu = u * u;\n    var uuu = uu * u;\n\n    var x = uuu * curve.startPoint.x;\n    x += 3 * uu * t * curve.control1.x;\n    x += 3 * u * tt * curve.control2.x;\n    x += ttt * curve.endPoint.x;\n\n    var y = uuu * curve.startPoint.y;\n    y += 3 * uu * t * curve.control1.y;\n    y += 3 * u * tt * curve.control2.y;\n    y += ttt * curve.endPoint.y;\n\n    var width = startWidth + ttt * widthDelta;\n    this._drawPoint(x, y, width);\n  }\n\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._drawDot = function (point) {\n  var ctx = this._ctx;\n  var width = typeof this.dotSize === 'function' ? this.dotSize() : this.dotSize;\n\n  ctx.beginPath();\n  this._drawPoint(point.x, point.y, width);\n  ctx.closePath();\n  ctx.fill();\n};\n\nSignaturePad.prototype._fromData = function (pointGroups, drawCurve, drawDot) {\n  for (var i = 0; i < pointGroups.length; i += 1) {\n    var group = pointGroups[i];\n\n    if (group.length > 1) {\n      for (var j = 0; j < group.length; j += 1) {\n        var rawPoint = group[j];\n        var point = new Point(rawPoint.x, rawPoint.y, rawPoint.time);\n        var color = rawPoint.color;\n\n        if (j === 0) {\n          // First point in a group. Nothing to draw yet.\n\n          // All points in the group have the same color, so it's enough to set\n          // penColor just at the beginning.\n          this.penColor = color;\n          this._reset();\n\n          this._addPoint(point);\n        } else if (j !== group.length - 1) {\n          // Middle point in a group.\n          var _addPoint2 = this._addPoint(point),\n              curve = _addPoint2.curve,\n              widths = _addPoint2.widths;\n\n          if (curve && widths) {\n            drawCurve(curve, widths, color);\n          }\n        } else {\n          // Last point in a group. Do nothing.\n        }\n      }\n    } else {\n      this._reset();\n      var _rawPoint = group[0];\n      drawDot(_rawPoint);\n    }\n  }\n};\n\nSignaturePad.prototype._toSVG = function () {\n  var _this2 = this;\n\n  var pointGroups = this._data;\n  var canvas = this._canvas;\n  var ratio = Math.max(window.devicePixelRatio || 1, 1);\n  var minX = 0;\n  var minY = 0;\n  var maxX = canvas.width / ratio;\n  var maxY = canvas.height / ratio;\n  var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n\n  svg.setAttributeNS(null, 'width', canvas.width);\n  svg.setAttributeNS(null, 'height', canvas.height);\n\n  this._fromData(pointGroups, function (curve, widths, color) {\n    var path = document.createElement('path');\n\n    // Need to check curve for NaN values, these pop up when drawing\n    // lines on the canvas that are not continuous. E.g. Sharp corners\n    // or stopping mid-stroke and than continuing without lifting mouse.\n    if (!isNaN(curve.control1.x) && !isNaN(curve.control1.y) && !isNaN(curve.control2.x) && !isNaN(curve.control2.y)) {\n      var attr = 'M ' + curve.startPoint.x.toFixed(3) + ',' + curve.startPoint.y.toFixed(3) + ' ' + ('C ' + curve.control1.x.toFixed(3) + ',' + curve.control1.y.toFixed(3) + ' ') + (curve.control2.x.toFixed(3) + ',' + curve.control2.y.toFixed(3) + ' ') + (curve.endPoint.x.toFixed(3) + ',' + curve.endPoint.y.toFixed(3));\n\n      path.setAttribute('d', attr);\n      path.setAttribute('stroke-width', (widths.end * 2.25).toFixed(3));\n      path.setAttribute('stroke', color);\n      path.setAttribute('fill', 'none');\n      path.setAttribute('stroke-linecap', 'round');\n\n      svg.appendChild(path);\n    }\n  }, function (rawPoint) {\n    var circle = document.createElement('circle');\n    var dotSize = typeof _this2.dotSize === 'function' ? _this2.dotSize() : _this2.dotSize;\n    circle.setAttribute('r', dotSize);\n    circle.setAttribute('cx', rawPoint.x);\n    circle.setAttribute('cy', rawPoint.y);\n    circle.setAttribute('fill', rawPoint.color);\n\n    svg.appendChild(circle);\n  });\n\n  var prefix = 'data:image/svg+xml;base64,';\n  var header = '<svg' + ' xmlns=\"http://www.w3.org/2000/svg\"' + ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"' + (' viewBox=\"' + minX + ' ' + minY + ' ' + maxX + ' ' + maxY + '\"') + (' width=\"' + maxX + '\"') + (' height=\"' + maxY + '\"') + '>';\n  var body = svg.innerHTML;\n\n  // IE hack for missing innerHTML property on SVGElement\n  if (body === undefined) {\n    var dummy = document.createElement('dummy');\n    var nodes = svg.childNodes;\n    dummy.innerHTML = '';\n\n    for (var i = 0; i < nodes.length; i += 1) {\n      dummy.appendChild(nodes[i].cloneNode(true));\n    }\n\n    body = dummy.innerHTML;\n  }\n\n  var footer = '</svg>';\n  var data = header + body + footer;\n\n  return prefix + btoa(data);\n};\n\nSignaturePad.prototype.fromData = function (pointGroups) {\n  var _this3 = this;\n\n  this.clear();\n\n  this._fromData(pointGroups, function (curve, widths) {\n    return _this3._drawCurve(curve, widths.start, widths.end);\n  }, function (rawPoint) {\n    return _this3._drawDot(rawPoint);\n  });\n\n  this._data = pointGroups;\n};\n\nSignaturePad.prototype.toData = function () {\n  return this._data;\n};\n\nexport default SignaturePad;\n"],"names":[],"sourceRoot":"webpack:///"}