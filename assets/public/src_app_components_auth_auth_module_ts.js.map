{"version":3,"file":"src_app_components_auth_auth_module_ts.js","mappings":"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","sources":["./src/app/components/auth/auth.component.ts","./src/app/components/auth/auth.module.ts","./src/app/components/auth/forgot-pass-word.component.ts","./src/app/components/auth/auth.component.html","./src/app/components/auth/forgot-pass-word.component.html"],"sourcesContent":["import { Component, OnInit, ErrorHandler, ViewChild } from '@angular/core';\r\n\r\nimport { Router } from '@angular/router';\r\n\r\nimport { ModalController, Platform } from '@ionic/angular';\r\nimport { FormBuilder, FormGroup, FormControl, Validators } from '@angular/forms';\r\n\r\nimport { IdentityService } from '../../shared/services';\r\nimport { UtilityService } from '../../shared/utility.service';\r\nimport { Errors } from '../../models';\r\nimport {ForgotPassWordComponent} from './forgot-pass-word.component'\r\n\r\n@Component({\r\n  selector: 'app-auth',\r\n  templateUrl: './auth.component.html',\r\n  styleUrls: ['./auth.component.scss'],\r\n})\r\nexport class AuthComponent implements OnInit {\r\n\r\n  year: number = new Date().getFullYear();\r\n  errors: Errors = new Errors();\r\n  submitting: boolean = false;\r\n  errorMsg: string = '';\r\n  authForm: FormGroup;\r\n  username: string;\r\n\r\n  // test: any = 123456789;\r\n  // test1: any = 123456789;\r\n\r\n  currencyMask: any = {\r\n    align: \"right\",\r\n    allowNegative: true,\r\n    allowZero: true,\r\n    decimal: \",\",\r\n    precision: 0,\r\n    prefix: \"\",\r\n    suffix: \"\",\r\n    thousands: \".\",\r\n    nullable: false\r\n  };\r\n\r\n  //@ViewChild('txtUsername') txtUsername: any;\r\n  hide: boolean = true;\r\n\r\n  subscription: any;\r\n\r\n  constructor(\r\n    private modalController: ModalController,\r\n    private identityService: IdentityService,\r\n    private _utilityService: UtilityService,\r\n    private router: Router,\r\n    private platform: Platform,\r\n    private fb: FormBuilder\r\n  ) {\r\n    this.authForm = this.fb.group({\r\n      'username': ['', Validators.required],\r\n      'password': ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  async login(form: any) {\r\n    try {\r\n      this.submitting = true;\r\n      const credentials = this.authForm.value;\r\n      const res = await this.identityService.attemptAuth(credentials.username, credentials.password);\r\n      if (!res) {\r\n        this.errors.errors.error = 'error';\r\n        this.errors.errors.error_description = 'Có lỗi xảy ra vui lòng thử lại sau';\r\n        this.submitting = false;\r\n        //this._utilityService.showAlert('Có lỗi xảy ra vui lòng thử lại sau.');\r\n        //throw new Error(this.errors);\r\n        return;\r\n      }\r\n      this.router.navigate(['/tabs/home']);\r\n    } catch (err) {\r\n\r\n      //return;\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n\r\n  }\r\n\r\n  async forgotPassword(ev: any) {\r\n    const modal = await this.modalController.create({\r\n      component: ForgotPassWordComponent\r\n    });\r\n\r\n    modal.onDidDismiss().then(async (dataReturned) => {\r\n    });\r\n    return await modal.present();\r\n  }\r\n\r\n  ngOnInit() {\r\n   this.identityService.purgeAuth();\r\n  }\r\n\r\n  ionViewDidEnter() {\r\n  }\r\n\r\n  ionViewWillLeave() {\r\n    this.subscription?.unsubscribe();\r\n  }\r\n\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RouterModule } from '@angular/router';\r\n\r\nimport { AuthComponent } from './auth.component';\r\n\r\nimport { NoAuthService } from '../../shared/services';\r\nimport { MaterialModule } from '../../material.module';\r\nimport { SharedModule } from '../shared.module';\r\nimport {ForgotPassWordComponent} from './forgot-pass-word.component'\r\n\r\n\r\nconst routing: ModuleWithProviders<AuthModule> = RouterModule.forChild([\r\n  {\r\n    path: '',\r\n    component: AuthComponent\r\n  }\r\n\r\n]);\r\n\r\n@NgModule({\r\n  declarations: [\r\n    AuthComponent,\r\n    ForgotPassWordComponent\r\n  ],\r\n  providers: [NoAuthService],\r\n  imports: [\r\n    SharedModule,\r\n    routing\r\n  ],\r\n  exports: [\r\n    ForgotPassWordComponent\r\n  ]\r\n})\r\nexport class AuthModule { }\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { Errors } from 'src/app/models';\r\nimport { IdentityService } from 'src/app/shared/services';\r\nimport { UtilityService } from 'src/app/shared/utility.service';\r\n\r\n@Component({\r\n  selector: 'app-forgot-pass-word',\r\n  templateUrl: './forgot-pass-word.component.html',\r\n  styleUrls: ['./forgot-pass-word.component.scss'],\r\n})\r\nexport class ForgotPassWordComponent implements OnInit {\r\n  \r\n  errors: Errors = new Errors();\r\n  submitting: boolean = false;\r\n  errorMsg: string = '';\r\n  authForm: FormGroup;\r\n  username: string;\r\n  email: string;\r\n\r\n  constructor(\r\n    private _utilityService: UtilityService,\r\n    private modalController: ModalController,\r\n    private identityService: IdentityService,\r\n    private router: Router,\r\n    private fb: FormBuilder\r\n  ) { \r\n    this.authForm = this.fb.group({\r\n      'username': ['', Validators.required],\r\n      'email': ['', Validators.required]\r\n    });\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  async onSubmit(form: any) {\r\n    \r\n    try {\r\n      this.submitting = true;\r\n      const credentials = this.authForm.value;\r\n      const res = await this.identityService.sendMailPass(credentials.username, credentials.email);\r\n      if (!res) {\r\n        this._utilityService.showToast(\"Tài khoản hoặc Email không đúng.\");\r\n        this.submitting = false;\r\n        return;\r\n      }\r\n      this._utilityService.showToast(\"Tài khoản đã gửi đến mail của bạn.\");\r\n      // this.closeModal(true);\r\n    } catch (err) {\r\n\r\n      //return;\r\n    } finally {\r\n      this.submitting = false;\r\n    }\r\n  }\r\n\r\n  async closeModal(ok: boolean = false) {\r\n\r\n    await this.modalController.dismiss();\r\n  }\r\n\r\n}\r\n","export default \"<ion-content [fullscreen]=\\\"true\\\" padding id=\\\"auth-page\\\">\\r\\n\\r\\n  <form role=\\\"form\\\" [formGroup]=\\\"authForm\\\" (ngSubmit)=\\\"authForm.valid && login(authForm)\\\">\\r\\n    \\r\\n    <div class=\\\"form-header ion-text-center mt-40 ion-margin-bottom\\\">\\r\\n      <img src=\\\"/assets/images/airpeed.jpg\\\">\\r\\n    </div>\\r\\n    <div class=\\\"ion-margin-top p-20\\\">\\r\\n\\r\\n      <div class=\\\"standard\\\">\\r\\n\\r\\n        <mat-form-field appearance=\\\"outline\\\" class=\\\"w-100\\\">\\r\\n          <mat-label>Tài khoản</mat-label>\\r\\n          <mat-icon matPrefix color=\\\"primary\\\" class=\\\"mr-5\\\">person</mat-icon>\\r\\n          <input matInput autocomplete=\\\"off\\\" name=\\\"username\\\" matInputAutofocus formControlName=\\\"username\\\" required #txtUsername\\r\\n            [(ngModel)]=\\\"username\\\" />\\r\\n          <button type=\\\"button\\\" class=\\\"asp-color-medium\\\" *ngIf=\\\"username\\\" mat-icon-button matSuffix\\r\\n            (click)=\\\"username=''\\\" aria-label=\\\"Xóa\\\" aria-pressed=\\\"true\\\">\\r\\n            <mat-icon>clear</mat-icon>\\r\\n          </button>\\r\\n        </mat-form-field>\\r\\n\\r\\n        <mat-form-field appearance=\\\"outline\\\" class=\\\"w-100\\\">\\r\\n          <mat-label>Mật khẩu</mat-label>\\r\\n          <mat-icon matPrefix color=\\\"primary\\\" class=\\\"mr-5\\\">vpn_key</mat-icon>\\r\\n          <input matInput autocomplete=\\\"off\\\" [type]=\\\"hide ? 'password' : 'text'\\\" name=\\\"password\\\" formControlName=\\\"password\\\" required\\r\\n            #txtPassword>\\r\\n          <button type=\\\"button\\\" mat-icon-button matSuffix (click)=\\\"hide = !hide\\\" [attr.aria-label]=\\\"'Hide password'\\\"\\r\\n            [attr.aria-pressed]=\\\"hide\\\">\\r\\n            <mat-icon class=\\\"asp-color-medium\\\">{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>\\r\\n          </button>\\r\\n        </mat-form-field>\\r\\n      </div>\\r\\n      <div class=\\\"form-action\\\">\\r\\n        <button class=\\\"float-right\\\" [disabled]=\\\"!authForm.valid || submitting\\\" (click)=\\\"login(authForm)\\\"\\r\\n          mat-raised-button color=\\\"primary\\\">Đăng nhập</button>\\r\\n        <a href=\\\"javascript:void(0)\\\" (click)=\\\"forgotPassword($event)\\\" class=\\\"mt-16 asp-color-medium\\\">Quên mật\\r\\n          khẩu?</a>\\r\\n      </div>\\r\\n      <mat-progress-bar *ngIf=\\\"submitting\\\" mode=\\\"indeterminate\\\" color=\\\"primary\\\"></mat-progress-bar>\\r\\n    </div>\\r\\n  </form>\\r\\n</ion-content>\\r\\n\\r\\n<ion-footer class=\\\"ion-no-border\\\">\\r\\n  <ion-toolbar>\\r\\n    <ion-title class=\\\"ion-text-center copyright\\\">\\r\\n      Copyright © {{year}} <a href=\\\"https://asp.com.vn/\\\" target=\\\"_blank\\\">asp ERP Software JSC</a>\\r\\n    </ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-footer>\\r\\n\";","export default \"<ion-header>\\r\\n  <ion-toolbar color=\\\"asp\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-button (click)=\\\"closeModal()\\\" fill=\\\"clear\\\">\\r\\n        <ion-icon name=\\\"close-outline\\\" size=\\\"large\\\"></ion-icon>\\r\\n      </ion-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>Quên mật khẩu</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content [fullscreen]=\\\"true\\\" padding id=\\\"auth-page\\\">  \\r\\n\\r\\n  <form role=\\\"form\\\" [formGroup]=\\\"authForm\\\" (ngSubmit)=\\\"authForm.valid && onSubmit(authForm)\\\">\\r\\n    \\r\\n    <div class=\\\"form-header ion-text-center mt-40 ion-margin-bottom\\\">\\r\\n      <img src=\\\"/assets/images/logo_footer.png\\\">\\r\\n    </div>\\r\\n    <div class=\\\"ion-margin-top p-20\\\">\\r\\n\\r\\n      <div class=\\\"standard\\\">\\r\\n\\r\\n        <mat-form-field appearance=\\\"outline\\\" class=\\\"w-100\\\">\\r\\n          <mat-label>Tài khoản</mat-label>\\r\\n          <mat-icon matPrefix color=\\\"primary\\\" class=\\\"mr-5\\\">person</mat-icon>\\r\\n          <input matInput autocomplete=\\\"off\\\" name=\\\"username\\\" matInputAutofocus formControlName=\\\"username\\\" required #txtUsername\\r\\n            [(ngModel)]=\\\"username\\\" />\\r\\n          <button type=\\\"button\\\" class=\\\"asp-color-medium\\\" *ngIf=\\\"username\\\" mat-icon-button matSuffix\\r\\n            (click)=\\\"username=''\\\" aria-label=\\\"Xóa\\\" aria-pressed=\\\"true\\\">\\r\\n            <mat-icon>clear</mat-icon>\\r\\n          </button>\\r\\n        </mat-form-field>\\r\\n\\r\\n        <mat-form-field appearance=\\\"outline\\\" class=\\\"w-100\\\">\\r\\n          <mat-label>Email</mat-label>\\r\\n          <mat-icon matPrefix color=\\\"primary\\\" class=\\\"mr-5\\\">email</mat-icon>\\r\\n          <input  matInput autocomplete=\\\"off\\\" name=\\\"email\\\" formControlName=\\\"email\\\" required #txtEmail\\r\\n            [(ngModel)]=\\\"email\\\" \\r\\n            pattern=\\\"[a-zA-Z0-9!#$%&'*+\\\\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\\\\.[a-zA-Z0-9-]+)*\\\"\\r\\n            />\\r\\n          <button type=\\\"button\\\" class=\\\"asp-color-medium\\\" *ngIf=\\\"email\\\" mat-icon-button matSuffix\\r\\n            (click)=\\\"email=''\\\" aria-label=\\\"Xóa\\\" aria-pressed=\\\"true\\\">\\r\\n            <mat-icon>clear</mat-icon>\\r\\n          </button>\\r\\n        </mat-form-field>\\r\\n      </div>\\r\\n      <div class=\\\"form-action\\\">\\r\\n        <a class=\\\"mt-16 asp-color-medium\\\">Mật khẩu được gửi lại đến mail tài khoản!</a>\\r\\n        <button class=\\\"float-center\\\" [disabled]=\\\"!authForm.valid || submitting\\\" (click)=\\\"onSubmit(authForm)\\\"\\r\\n          mat-raised-button color=\\\"primary\\\">Xác nhận</button>\\r\\n      </div>\\r\\n      <mat-progress-bar *ngIf=\\\"submitting\\\" mode=\\\"indeterminate\\\" color=\\\"primary\\\"></mat-progress-bar>\\r\\n    </div>\\r\\n  </form>\\r\\n</ion-content>\";"],"names":[],"sourceRoot":"webpack:///"}